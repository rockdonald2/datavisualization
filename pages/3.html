<!DOCTYPE html>
<html lang="en"
    class="text-gray-800 text-base md:text-lg antialiased leading-relaxed tracking-normal break-normal bg-white">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
            content="width=device-width, initial-scale=1.0">
        <meta name="description"
            content="A repo for studying a book.">
        <meta name="keywords"
            content="visualization,javascript,python,d3,flask,restful">
        <meta name="author"
            content="Luk√°cs Zsolt">
        <meta http-equiv="X-UA-Compatible"
            content="ie=edge">
        <title>3 Az adatok megszerz√©se</title>
        <link rel="stylesheet"
            href="../css/style.css">
        <link rel="stylesheet"
            href="../css/compiled.css">
        <link rel="stylesheet"
            href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/atom-one-dark.min.css">
        <link rel="stylesheet"
            href="../tools/pushy-1.3.0/css/pushy.css">
        <!-- Safari-n az emoji favicon nem m≈±k√∂dik -->
        <link rel="icon"
            href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22
                viewBox=%220
                0
                100
                100%22><text y=%22.9em%22
                    font-size=%2290%22>üìï</text></svg>">
    </head>

    <body class="overflow-x-hidden">
        <!-- navig√°ci√≥ -->
        <nav class="pushy pushy-left">
            <div class="pushy-content">
                <ul>
                    <li class="pushy-link"><a href="../index.html">1 Bevezet√©s</a></li>
                    <li class="pushy-link"><a href="2.html">2 Els≈ë l√©p√©sek az adatvizualiz√°ci√≥ban</a></li>
                    <li class="pushy-link"><a href="3.html">3 Az adatok megszerz√©se</a></li>
                </ul>
            </div>
        </nav>

        <!-- Pushy-hoz site overlay -->
        <div class="site-overlay"></div>

        <main id="container"
            class="container p-8 md:p-6 max-w-2xl md:max-w-3xl min-h-screen">
            <button class="menu-btn px-4 py-2 bg-gray-900 text-white hover:bg-blue-800 transition duration-75 ease-in">&#9776;
                Men√º</button>

            <!-- harmadik r√©sze eleje -->

            <section class="pb-8">
                <h1 class="text-3xl md:text-4xl py-8 text-gray-900 font-semibold">3 Az adatok megszerz√©se</h1>

                <h2 class="text-2xl pb-4 font-semibold text-gray-800">Szerezz√ºk meg az adatot a netr≈ël Python-nal</h2>
                <p class="text-lg font-normal pb-3">A k√∂nyv ennek a r√©sz√©ben nekikezd√ºnk a val√≥di adat-vizualiz√°ci√≥s folyamatnak
                    az
                    adatokkal megszerz√©s√©vel.</p>
                <p class="text-lg font-normal pb-3">Alapvet≈ëen elmondhat√≥, hogy n√©lk√ºl√∂zhetetlen r√©sze az adat-megjelen√≠t√©snek
                    maga
                    az
                    adat, ami nem minden esetben √°ll k√©szen sz√°munkra. A lehet≈ë legjobb √©s legtiszt√°bb m√≥don kell azt
                    megszerezn√ºnk √©s ebben nagy seg√≠ts√©g√ºnkre van a Python. Sz√°mos Python k√∂nyvt√°r √°ll rendelkez√©s√ºnkre a
                    folyamat
                    v√©grehajt√°s√°ra. A legf≈ëbb m√≥dok arra ahogyan adatot tudunk let√∂lteni a netr≈ël: HTTP-n kereszt√ºl
                    megszereezz√ºk
                    a nyers adatf√°jlt, valamilyen ismert form√°tumban, legyen az CSV vagy JSON; ak√°r egy erre dedik√°lt API-t is
                    haszn√°lhatunk; megszerezz√ºk az adatot az √°ltal, hogy let√∂ltj√ºk a weboldalt HTTP-n kereszt√ºl √©s √©rtelmezz√ºk
                    helyileg a sz√ºks√©ges adatok√©rt.</p>
                <p class="text-lg font-normal">El≈ësz√∂ris, n√©zz√ºk meg az egyik legelterjedtebb Python HTTP k√∂nyvt√°rt a
                    requests-et. Ahogyan megbesz√©lt√ºk a k√∂nyv el≈ëz≈ë r√©sz√©ben azon f√°jlok, amelyek a b√∂ng√©sz≈ëben megjelennek
                    val√≥j√°ban HTTP-n kereszt√ºl ker√ºlnek tov√°bb√≠t√°sra. Teh√°t, a webes tartalmat el≈ësz√∂r lekell k√©rni egy GET
                    request √°ltal, miel≈ëtt azt √©rtelmezni lehessen. Mivel a requests nem r√©sze a Python szabv√°ny k√∂nyvt√°rnak
                    el≈ësz√∂r
                    le kell azt t√∂lts√ºk a k√∂vetkez≈ë paranccsal:</p>
                <pre
                    class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="shell">$ pip install requests</code></pre>
                <p class="text-lg font-normal">Miut√°n let√∂lt√∂tt√ºk neki is foghatunk a folyamatnak. Els≈ë l√©p√©sben pr√≥b√°ljuk a
                    k√∂nyvt√°r seg√≠ts√©g√©vel let√∂lteni egy Wikip√©dia oldalt. Haszn√°lhatjuk erre a requests k√∂nyvt√°r get met√≥dus√°t,
                    amit a k√∂vetkez≈ë k√≥dr√©szlet is szeml√©ltet:</p>
                <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">import requests

response = requests.get('https://en.wikipedia.org/wiki/Nobel_Prize')

response # output: &#60;Response [200]>

dir(response) # output: a response objektum attrib√∫tumjai</code></pre>
                <p class="text-lg font-normal">A fenti 200-as HTTP st√°tusz k√≥d l√©nyeg√©ben a HTTP megfelel≈ëje a 'minden rendben
                    volt'-nak. Ebben a kontextusban ez azt jelenti, hogy bizonyosan valamilyen inform√°ci√≥t a GET request
                    visszat√©r√≠tett, a k√∂vetkez≈ë paranccsal ak√°r meg is vizsg√°lhatjuk mit:</p>
                <pre
                    class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">response.headers</code></pre>
                <p class="text-lg font-normal">N√©h√°ny nagyon √©rdekes dolgot tudunk megfigyelni a headers attrib√∫tummal, p√©ld√°ul
                    azt, hogy a weboldalt tartalma <em>text/html</em>, a tartalom enk√≥dol√°sa <em>gzip</em>, stb:</p>
                <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">{'Date': 'Sun, 05 Jul 2020 15:09:55 GMT', 'Server': 'mw1407.eqiad.wmnet', 
'X-Content-Type-Options': 'nosniff', 'P3p': 'CP="See https://en.wikipedia.org/wiki/Special:CentralAutoLogin/P3P for more info."', 'Content-Language': 'en', 'Vary': 'Accept-Encoding,Cookie,Authorization', 'Last-Modified': 'Sun, 05 Jul 2020 14:58:26 GMT', 
'Content-Type': 'text/html; charset=UTF-8', 'Content-Encoding': 'gzip', 'Age': '10136', 'X-Cache': 'cp3054 miss, cp3064 hit/19', 'X-Cache-Status': 'hit-front', 'Server-Timing': 'cache;desc="hit-front"', 'Strict-Transport-Security': 'max-age=106384710; includeSubDomains; preload', 
'Set-Cookie': 'WMF-Last-Access=05-Jul-2020;Path=/;HttpOnly;secure;Expires=Thu, 06 Aug 2020 12:00:00 GMT, WMF-Last-Access-Global=05-Jul-2020;Path=/;Domain=.wikipedia.org;HttpOnly;secure;Expires=Thu, 06 Aug 2020 12:00:00 GMT, GeoIP=MD:CU:Chisinau:47.01:28.86:v4; Path=/; secure; Domain=.wikipedia.org', 
'X-Client-IP': '178.17.168.163', 'Cache-Control': 'private, s-maxage=0, max-age=0, must-revalidate', 
'Accept-Ranges': 'bytes', 'Content-Length': '81973', 'Connection': 'keep-alive'}</code></pre>
                <p class="text-lg font-normal">Mivel, a fenti vizsg√°lattal megtudtuk azt, hogy az eredm√©ny egy sz√∂veg, ak√°r le is
                    k√©rhetj√ºk a val√≥di tartalm√°t:</p>
                <pre
                    class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">response.text</code></pre>
                <p class="text-lg font-normal">A fenti k√≥dr√©szlet visszat√©r√≠ti a GET requests √°ltal lek√©rt teljes HTML sz√∂veget.
                    √ñsszes√©g√©benn a requests egy el√©g k√©nyelmes megold√°s arra, hogy gyorsan szerezz√ºnk webes adatot a Python
                    programukba. P√©ldak√©ppen k√©rj√ºk le egy adatsettet az Eurostatr√≥l, kicsit neh√©zkes feladat megtal√°lni a
                    megfelel≈ë el√©r√©si √∫tat, de a k√∂vetkez≈ë p√©lda ezt szeml√©lteti:</p>
                <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">response = requests.get('http://ec.europa.eu/eurostat/wdds/rest/data/v2.1/json/en/nama_10_gdp?geo=EU28&precision=1&na_item=B1GQ&unit=CP_MEUR&time=2018&time=2019')

response # output: &#60;Response [200]></code></pre>
                <p class="text-lg font-normal">Mivel a fenti esetben a kapott f√°jl egy JSON √°llom√°ny, a requests k√∂nyvt√°r
                    rendelkezik egy met√≥dussal, amely lehet≈ëv√© teszi azt, hogy el√©rj√ºk a v√°lasz adatj√°t, mint egy Python dict. Ez
                    tartalmazni fogja a metaadatot √©s egy list√°nyi adatelemet:</p>
                <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">response.json()

""" 
output: 

{'version': '2.0',
 'label': 'GDP and main components (output, expenditure and income)',
 'href': 'http://ec.europa.eu/eurostat/wdds/rest/data/v2.1/json/en/nama_10_gdp?geo=EU28&precision=1&na_item=B1GQ&unit=CP_MEUR&time=2018&time=2019',
 'source': 'Eurostat',
 'updated': '2020-07-01',
 'extension': {'datasetId': 'nama_10_gdp',
  'lang': 'EN',
  'description': None,
  'subTitle': None},
 'class': 'dataset',
 'value': {'0': 15915732.9, '1': 16452065.5},
 'dimension': {'unit': {'label': 'unit',
   'category': {'index': {'CP_MEUR': 0},
    'label': {'CP_MEUR': 'Current prices, million euro'}}},
  'na_item': {'label': 'na_item',
   'category': {'index': {'B1GQ': 0},
    'label': {'B1GQ': 'Gross domestic product at market prices'}}},
  'geo': {'label': 'geo',
   'category': {'index': {'EU28': 0},
    'label': {'EU28': 'European Union - 28 countries (2013-2020)'}}},
  'time': {'label': 'time',
   'category': {'index': {'2018': 0, '2019': 1},
    'label': {'2018': '2018', '2019': '2019'}}}},
 'id': ['unit', 'na_item', 'geo', 'time'],
 'size': [1, 1, 1, 2]}
"""</code></pre>
                <p class="text-lg font-normal pb-3">Az el≈ëz≈ë p√©ld√°kban mindig 'nyers' m√≥don weboldalakat, vagy JSON √°llom√°nyokat
                    √©rt√ºnk
                    el a requests k√∂nyvt√°r seg√≠ts√©g√©vel, a k√∂vetkez≈ëkben n√©zz√ºk meg azt is mik√©nt tudjuk API-kkal val√≥
                    kommunik√°ci√≥kra is haszn√°lni. Az API-kkal val√≥ kommunik√°ci√≥ra akkor van sz√ºks√©g, amennyiben az adat amit
                    keres√ºnk nem tal√°lhat√≥ meg a web-en, de tal√°n el√©rhetj√ºk egy API-n kereszt√ºl. Ez mag√°ba foglalja azt, hogy egy
                    lek√©r√©st int√©z√ºnk a megfelel≈ë szerverhez, hogy el√©rj√ºk az adatot egy fix vagy √°ltalunk v√°laszthat√≥
                    form√°tumban.</p>
                <p class="text-lg font-normal pb-3">A web-es API-k √°ltal leggyakrabban haszn√°lt form√°tumok a JSON √©s az XML.
                    Sz√°munkra
                    az els≈ë lesz a fontos, kor√°bban eml√≠tett okokb√≥l kifoly√≥lag. Sz√°mos megk√∂zel√≠t√©s van arra, hogy arra, hogy
                    l√©trehozzunk egy web-es API-t, √©s egy j√≥ ideig egy kis h√°bor√∫hoz hasonl√≠t√≥ harc volt a k√ºl√∂nb√∂z≈ë domin√°ns
                    architekt√∫r√°k k√∂z√∂tt: REST vs. XML-RPC vs. SOAP. Manaps√°g, a REST t≈±nik diadalmasnak, ami egy nagyon j√≥ dolog,
                    hiszen egyszer≈±bb a haszn√°lata √©s k√∂nnyedebb, mint b√°rmelyik alternat√≠va, szerencs√©re a szabv√°nyos√≠t√°snak
                    k√∂sz√∂nhet≈ëen nagyon val√≥sz√≠n≈±v√© teszi azt, hogy felismered √©s gyorsan √°tszoksz b√°rmely √∫j API-hoz, amivel
                    b√°rmikor is tal√°lkozol. Ide√°lis, ak√°r a k√≥dodat is teljesen √∫jrahaszn√°lhatod.</p>
                <p class="text-lg font-normal pb-3">A legt√∂bb t√°voli adat el√©r√©s √©s manipul√°l√°s n√©gy m≈±veletben √∂sszefoglalhat√≥:
                    hozzunk l√©tre valamit, k√©rj√ºnk le valamit, friss√≠ts√ºnk valamit √©s v√©g√ºl t√∂r√∂lj√ºnk valamit (CRUD). A HTTP
                    biztos√≠tja
                    ezen alapvet≈ë m≈±veleteket a POST, GET, PUT, DELETE utas√≠t√°sokkal, √©s a REST pontosan ezen utas√≠t√°sok
                    absztrakci√≥j√°ra √©p√ºl, mindenk√∂zben √©p√≠tve az URI-ra.</p>
                <p class="text-lg font-normal">Sz√°mos vita van arr√≥l, hogy mi a megfelel≈ë √©s mi a nem megfelel≈ë RESTful interf√©sz,
                    de l√©nyeg√©ben az URI-nak <em>(pl. http://example.com/api/items/2)</em>, tartalmaznia kellene mindazon
                    inform√°ci√≥kat
                    amelyek sz√ºks√©gesek ahhoz, hogy v√©gbemehessen egy eml√≠tett CRUD m≈±velet. √ögy lehet elk√©pzelni az eg√©sz munk√°t,
                    hogy az URI a virtu√°lis el√©r√©se az adatnak, a CRUD pedig a m≈±veleteket jelenti, amelyeket az adattal k√©pesek
                    vagyunk elv√©gezni.</p>
            </section>

            <!-- harmadik r√©sze v√©ge -->

            <div class="my-8 flex">
                <button class="flex-auto w-24 bg-gray-900 text-white group hover:bg-blue-800 transition duration-75 ease-in"><a
                        class="block px-4 py-2"
                        href="2.html"><span
                            class="inline-block font-normal transform group-hover:-translate-x-1 transition duration-100 ease-in">&larr;</span>
                        El≈ëz≈ë</a></button>
                <!--<button
                    class="flex-auto w-24 ml-4 py-2 bg-gray-900 text-white group hover:bg-blue-800 transition duration-75
                    ease-in"><a class="block px-4"
                        href="#">K√∂vetkez≈ë
                        <span
                            class="inline-block font-normal transform group-hover:translate-x-1 transition duration-100 ease-in">&rarr;</span></a></button>-->
            </div>

        </main>


        <!--
        <script src="node_modules/d3/dist/d3.min.js"></script>
        <script src="node_modules/underscore/underscore-min.js"></script> 
        -->

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.10.2/underscore-min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
        <script src="../tools/pushy-1.3.0/js/pushy.min.js"></script>
        <script>
            hljs.initHighlightingOnLoad();
        </script>
        <script src="../javascript/main.js"></script>
        <script src="../javascript/introd3.js"></script>
    </body>

</html>