<!DOCTYPE html>
<html lang="en"
    class="text-black text-base md:text-lg antialiased leading-relaxed tracking-normal break-normal bg-white">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
            content="width=device-width, initial-scale=1.0">
        <meta name="description"
            content="A repo for studying a book.">
        <meta name="keywords"
            content="visualization,javascript,python,d3,flask,restful">
        <meta name="author"
            content="Luk√°cs Zsolt">
        <meta http-equiv="X-UA-Compatible"
            content="ie=edge">
        <title>5 Az adatok eljuttat√°sa</title>
        <link rel="stylesheet"
            href="../css/style.css">
        <!-- Safari-n az emoji favicon nem m≈±k√∂dik -->
        <link rel="icon"
            href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22
                viewBox=%220
                0
                100
                100%22><text y=%22.9em%22
                    font-size=%2290%22>üìï</text></svg>">
    </head>

    <body class="overflow-x-hidden">
        <!-- navig√°ci√≥ -->
        <nav class="pushy pushy-left">
            <div class="pushy-content">
                <ul>
                    <li class="pushy-link"><a href="../index.html">1 Bevezet√©s</a></li>
                    <li class="pushy-link"><a href="2.html">2 Els≈ë l√©p√©sek az adatvizualiz√°ci√≥ban</a></li>
                    <li class="pushy-link"><a href="3.html">3 Az adatok megszerz√©se</a></li>
                    <li class="pushy-link"><a href="4.html">4 Az adatok tiszt√≠t√°sa √©s feldolgoz√°sa</a></li>
                    <li class="pushy-link"><a href="5.html">5 Az adatok eljuttat√°sa</a></li>
                </ul>
            </div>
        </nav>

        <!-- Pushy-hoz site overlay -->
        <div class="site-overlay"></div>

        <main id="container"
            class="container p-8 md:p-6 max-w-2xl md:max-w-4xl min-h-screen mx-auto xl:ml-64">
            <button id="menu"
                class="menu-btn px-4 py-2 bg-gray-900 text-white hover:bg-blue-800 transition duration-75 ease-in rounded-md">&#9776;
                Men√º</button>

            <!-- negyedik r√©sze eleje -->

            <section class="pb-8">
                <h1 class="text-3xl md:text-4xl py-8 text-gray-900 font-semibold">5 Az adatok eljuttat√°sa</h1>

                <section id="5staticvsdynamic">
                    <h2 class="text-2xl pb-4 font-semibold text-gray-800">Az adatok eljuttat√°sa</h2>
                    <p id="firstPar"
                        class="text-lg font-normal pb-3">Miut√°n megszerezt√ºk az adatunkat √©s fel is dolgoztuk, megfigyelve bel≈ële
                        az √©rdekes r√©szeket a tiszt√≠t√°s ut√°n, nincs m√°s dolguk a val√≥di vizualiz√°ci√≥ el≈ëtt, minthogy valamilyen
                        m√≥don statikusan vagy dinamikusan eljuttasuk azt a b√∂ng√©sz≈ëbe, ahol a JavaScript feldolgozhassa. A mi
                        adatunk JSON form√°tumban van t√°rolva, teh√°t egy t√∂mbnyi objektum. Alapvet≈ëen, j√≥ h√ºvelykujj-szab√°ly az,
                        hogy egyr√©szt minden lehet adatel≈ëk√©sz√≠t√©st a Python-on bel√ºl v√©gz√ºnk el, valamint a form√°tum amiben
                        szolg√°ltassuk az adatot, a lehet≈ë legk√∂zelebb van ahhoz a form√°tumhoz, amit a JavaScript haszn√°l, a mi
                        eset√ºnkben ezek teljes√ºlnek, hiszen a D3 √°ltal t√°mogatott form√°tum az √°ltalunk is el≈ë√°ll√≠tott JSON.</p>
                    <p class="text-lg font-normal pb-3">Alapvet≈ëen, teh√°t sz√ºks√©g√ºnk lesz egy web-szerverre, amely k√©pes
                        feldolgozni a
                        HTTP lek√©rdez√©seket egy b√∂ng√©sz≈ëb≈ël, mint tudjuk a HTML f√°jlokra, CSS f√°jlokra, amelyeket a weboldal
                        fel√©p√≠t√©s√©hez tud majd haszn√°lni a b√∂ng√©sz≈ë, ugyanakkor ennek a szervernek kell kezelnie az AJAX
                        lek√©rdez√©seket is a megjelen√≠tett adatunkhoz.
                    </p>
                    <p class="text-lg font-normal pb-3">Python eset√©ben sz√°mos alternat√≠v√°nk van web-szerverre n√©zve. Ott vannak
                        az olyan egyszer≈± megold√°sok, mint a SimpleHTTPServer, illetve az olyan teljes√©rt√©k≈± rendszereket t√°mogat√≥
                        megold√°sok is, mint a Django. Azonban mi egy k√∂ztes megold√°st fogunk v√°lasztani a Flask-ot. A Flask a
                        legjobb eszk√∂z, amikor az ember csak egy egyszer≈± API-t akar l√©trehozni, hogy adatot szolg√°ltasson
                        vizualiz√°ci√≥j√°hoz.
                    </p>
                    <p class="text-lg font-normal">Els≈ë l√©p√©sben, tekinthetj√ºk ak√°r el≈ëk√©sz√≠t≈ë l√©p√©snek is, felmer√ºl a k√©rd√©s,
                        hogy hogyan szervezz√ºk meg k√∂nyvt√°raink √∂sszet√©tel√©t, amit a Flask hostolni fog. Egy j√≥ f√°jl elrendez√©s
                        nagyban megk√∂nny√≠theti a munk√°t, legyen az egy√©ni vagy kollabor√°ci√≥, a kulcsgondolat minden esetben, hogy
                        legyen egy k√∂vetkezetes mappaszerkezet√ºnk, ahogyan elrendezz√ºk f√°jlainkat. A k√∂vetkez≈ë √°bra h√°rom t√≠pus√∫
                        elrendez√©st mutat be, az egyszer≈± projektekt≈ël, az √∂sszetebbekig haladva:
                    </p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig63.png"
                            alt="√Åbra 63">
                        <figcaption class="text-center pt-3 pb-4 text-md">63. √Åbra: A mappaorganiz√°ci√≥
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal">Amennyiben az Anaconda csomagot haszn√°ljuk azzal m√°r alap√©rtelmezetten
                        rendelkez√©s√ºnkre √°ll a Flask, ha nem, akkor egy egyszer≈± pip telep√≠t√©ssel el√©rhet≈ëv√© v√°lik:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="shell">$ pip install flask</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Miut√°n megszerezt√ºk a Flask m√≥dult, semmi m√°s dolgunk, minthogy n√©h√°ny sornyi
                        k√≥ddal fel√°ll√≠tsuk a szerver√ºnket:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">from flask import Flask

app = Flask(__name__)

# a Flask route-ok lehet≈ës√©get ny√∫jtanak arra, hogy ir√°ny√≠tsuk a webes forgalmunkat, ez a root route, jelenleg a http://localhost:8000
@app.route('/')
def hello():
    return 'Hello World!'

# be√°ll√≠tja a port-ot, amelyen a lok√°lis szerver√ºnk futni fog,
# a debug m√≥dban pedig a Flask hasznos logokat fog ki√≠rni a k√©perny≈ëre, √©s error eset√©n egy b√∂ng√©sz≈ë-alap√∫ jelent√©st fog adni
if __name__ == "__main__":
    app.run(port=8000, debug=True)</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">K√∂vetkez≈ë l√©p√©sben bel√©pve abba a mapp√°ba, ahol az el≈ëbb l√©trehozott Python
                        k√≥dunk van lefuttatjuk:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="shell">$ ipython .\nobel_viz.py
 * Serving Flask app "nobel_viz" (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: on
 * Restarting with windowsapi reloader
 * Debugger is active!
 * Debugger PIN: 343-620-977
 * Running on http://127.0.0.1:8000/ (Press CTRL+C to quit)</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">Ezut√°n a fenti weboldalra felmenve, meg is kapjuk a k√≠v√°nt eredm√©nyt.
                        Fontos
                        kit√©rni arra, hogy alap√©rtelmezetten a Flask a nagyon kiterjedt √©s el√©gg√© intuit√≠v Jinja2 templatel√©si
                        k√∂nyvt√°rat haszn√°lja, amely seg√≠ts√©g√©vel Python v√°ltoz√≥kat vagyunk k√©pesek haszn√°lni arra, hogy
                        konfigur√°ljuk √©s meghat√°rozzuk egy HTML oldal tartalm√°t.
                    </p>
                    <p class="text-lg font-normal pb-3">A templatel√©s √°ltal dinamikus weboldalakat tudunk l√©trehozni, amelyek
                        tartalm√°t a programk√≥d szerveroldalt hat√°rozza meg. Ugyanakkor, a templatel√©s vizualiz√°ci√≥kor is hasznos
                        lehet, amikor √∂ssze√°ll√≠tunk l√©nyeg√©ben statikus HTML oldalakat, teljesen szerveroldalt, de √°ltal√°ban, √©s a
                        mi megk√∂zel√≠t√©s√ºnk √©rtelm√©ben, m√©gsem √≠gy fogunk elj√°rni, hiszen ink√°bb meg√≠rjuk mi az egyszer≈± HTML
                        gerincet, amelyre JavaScript haszn√°lat√°val fogjuk fektetni a vizualiz√°ci√≥t. Ilyen esetben, val√≥j√°ban a
                        szerver feladata nem az adat szolg√°ltat√°sa √©s a statikus oldal l√©trehoz√°sa, hanem csakis kiz√°r√≥lag az adat
                        szolg√°ltat√°s√°ra sz≈±k√ºl, a szerver lesz a k√∂ztes szerepl≈ë a rendszer√ºnkben, amely dinamikusan fogja a
                        sz√ºks√©ges adatot √°tvinni, √©s csereber√©lni a b√∂ng√©sz≈ëvel, JavaScripten √©s AJAX lek√©rdez√©seken kereszt√ºl.
                    </p>
                    <p class="text-lg font-normal pb-3">Ugyanakkor, a Flask teljes m√©rt√©kben k√©pes teljes√©rt√©k≈± weboldalakat
                        futtatni, er≈ëteljes HTML templatel√©ssel, √∫n. blueprintekkel, tervrajzokkal modul√°riss√° t√©ve nagy
                        oldalakat, √©s m√©g egy rak√°snyi hasznos pluginnal √©s kieg√©sz√≠t≈ëvel kib≈ëv√≠tve. Azok az egyoldalas oldalak,
                        amiken mi a vizualiz√°ci√≥inkat fogjuk futtatni nem ig√©nyelnek sok munk√°t, ahhoz, hogy a sz√ºks√©ges statikus
                        √°llom√°nyokat eljuttas√°k a b√∂ng√©sz≈ëbe. A f≈ë c√©l√ºnk a Flaskkal szemben, hogy a lehet≈ë legkevesebb id≈ë √©s
                        energiabefektet√©ssel, a legkevesebb programk√≥ddal hozzunk l√©tre robusztus RESTful web API-kkal rendelkez≈ë
                        hat√©kony, de egyszer≈± adatszervereket. Szerencs√©nkre, az el≈ëbb megfogalmazott c√©l, egyben a Flask egyik
                        legnagyobb er≈ëss√©ge is.
                    </p>
                    <p class="text-lg font-normal pb-3">Rengeteg olyan weboldal, amely nem ig√©nyli a dinamikus konfigur√°lt adat
                        bonyodalmait, d√∂nthet √∫gy, hogy azokat statikus form√°ban viszi √°t, amely l√©nyeg√©ben azt jelenti, hogy
                        minden HTML f√°jl, √©s d√∂nt≈ëen adat (√°ltal√°ban JSON vagy CSV form√°tumban) az adatszerver f√°jlrendszer√©ben
                        tal√°lhat√≥ meg, mint √°llom√°nyok, amelyek √≠gy b√°rmif√©le k√ºls≈ë h√≠v√°s n√©lk√ºl, p√©ldak√©ppen egy adatb√°zisba
                        t√∂rt√©n≈ë h√≠v√°s n√©lk√ºl k√∂nnyen el√©rhet≈ë.
                    </p>
                    <p class="text-lg font-normal pb-3">El≈ëny√ºk az, hogy a statikus weboldalakat k√∂nny≈± cachelni, amely azt
                        eredm√©nyezi, hogy azok k√©zbes√≠t√©se is jelent≈ësen felgyorsul. Tov√°bb√°, mindenk√©ppen biztons√°gosabbak is
                        lehetnek, hiszen a rendszeres adatb√°zish√≠v√°sok k√∂nny≈± c√©lpontokk√° v√°lhatnak esetleges rosszindulat√∫
                        t√°mad√°sok eset√©n. Az √°r amit fizetn√ºnk kell az eml√≠tett el≈ëny√∂k√©rt a rugalmass√°g hi√°nya. Az √°ltal, hogy
                        √∂nmagunkat korl√°tozzuk le n√©h√°ny, el≈ëre meghat√°rozott √©s √∂ssze√°ll√≠tott oldalra azt jelenti, hogy
                        megfosztjuk a felhaszn√°l√≥t b√°rmif√©le interakci√≥t√≥l, amely ak√°r megsz√ºks√©geltetn√© azt, hogy valamilyen
                        m√≥don t√∂bbv√°ltoz√≥s adatkombin√°ci√≥k l√©trej√∂tt√©t.
                    </p>
                    <p class="text-lg font-normal pb-3">Egy kezd≈ë adatvizualiz√°ci√≥s programoz√≥ sz√°m√°ra azonban m√©gis vonz√≥ lehet
                        els≈ë
                        r√°n√©z√©sre a statikus k√©zbes√≠t√©s, hiszen ez √°ltal nagyon k√∂nnyen l√©tre tudunk hozni √∂n√°ll√≥ projekteket,
                        an√©lk√ºl, hogy b√°rmif√©le webes API-t mell√©keln√ºnk kellene. Mind√∂ssze azt a n√©h√°ny √∂ssze√°ll√≠tott HTML, CSS,
                        √©s JSON √°llom√°nyt kell k√©zbes√≠ten√ºnk a projekt futtat√°s√°hoz. Nagyj√°b√≥l √∫gy, ahogy ez a repo is m≈±k√∂dik.
                        Minden f√°jl statikusan szolg√°ltatva van a GitHub sz√°m√°ra, ahol annak Pages szolg√°ltat√°s√°t felhaszn√°lva
                        megjelen√≠tem, n√©lk√ºl√∂zve b√°rmifajta felhaszn√°l√≥i interakci√≥t, a n√©h√°ny men√ºgomb kiv√©tel√©vel, amellyel
                        √∫jabb HTTP lek√©rdez√©seket tud int√©zni a felhaszn√°l√≥ m√°r √∂ssze√°ll√≠tott statikus f√°jlokra az adatszerveren.
                    </p>
                    <p class="text-lg font-normal">Hi√°ba mondhattam el az el≈ëbb, hogy ez az oldal, amin most a sz√∂vegem √≠rom
                        val√≥j√°ban statikus, hozzunk a k√∂vetkez≈ëkben m√©gis l√©tre m√©g egyett csak a p√©lda kedv√©√©rt. L√©trehozunk a
                        'flask_project' mapp√°n bel√ºl egy √∫j index.html oldalt, egy <em>h2</em> √©s egy <em>div</em> placeholderrel,
                        valamint egy <em>script</em> taggel, amellyel bet√∂ltj√ºk a helyi <em>script.js</em> f√°jlunkat. A JavaScript
                        k√≥dot k√ºl√∂n mapp√°ba √©s √°llom√°nyba helyezz√ºk, a CSS eset√©ben a p√©ld√°ban ez nem sz√ºks√©ges, hiszen mind√∂ssze
                        egyetlen sornyi CSS-t √≠runk. A 'data' mapp√°ban pedig a Nobel gy≈ëzteseket tartalmaz√≥ JSON √°llom√°ny
                        tal√°lhat√≥ meg:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="html">&#60;!DOCTYPE html>
&#60;html lang="en">

    &#60;head>
        &#60;meta charset="UTF-8">
        &#60;meta name="viewport"
            content="width=device-width, initial-scale=1.0">
        &#60;title>Basic Example&#60;/title>

        &#60;style>
            body { font-family: sans-serif; }
        &#60;/style>
    &#60;/head>

    &#60;body>
        &#60;h2 id="data-title">&#60;/h2>
        &#60;div id="data">
            &#60;pre>&#60;/pre>
        &#60;/div>

        &#60;script src="https://d3js.org/d3.v5.min.js">&#60;/script>
        &#60;script src="js/script.js">&#60;/script>
    &#60;/body>

&#60;/html></code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Az eml√≠tett adatunk, a JSON √°llom√°ny beolvas√°s√°hoz sz√ºks√©g√ºnk lesz egy AJAX
                        h√≠v√°sra a szerver√ºnkre. Mind a jQuery, de a D3 is rendelkezik nat√≠van f√ºggv√©nnyekkel ennek megejt√©s√©hez. A
                        D3 form√°tum szerint (JSON, CSV, TSV) rendelkezik egy met√≥dussal, a k√∂vetkez≈ë p√©lda azt mutatja be, hogy
                        hogyan tud a D3 a <em>json</em> met√≥dussal beolvasni adatot, felhaszn√°lva egy callback f√ºggv√©nyt:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">d3.json('../data/winners_cleaned.json', function (error) {
    if (error) {
        console.log(error); // ha hib√°t √©szlel √≠rja ki a console-ba
    }
}).then(function(data) {
    d3.select('h2#data-title').text('All the Nobel-winners');
    // kiv√°lasztjuk a h2 tag-et √©s megv√°ltoztatjuk annak bels≈ë tartalm√°t
    d3.select('div#data pre').html(JSON.stringify(data, null, 4));
    // a stringify egy hasznos f√ºggv√©ny, 
    // amellyel egy JS objectet alak√≠tunk outputolhatov√°
    // kiv√°lasztjuk a div tag-et √©s megv√°ltoztatjuk annak bels≈ë tartalm√°t
    // az adatunk tartalm√°ra, a null param√©terrel azt hat√°rozzuk meg, hogy nincs egy f√ºggv√©ny, amely √°talak√≠tja a tartalmat,
    // a 4-es param√©terrel pedig annak indent√°ci√≥j√°t √°ll√≠tjuk be, sz√≥k√∂z√∂kben pontos√≠tva, a k√∂nnyebb olvashat√≥s√°g miatt
});</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Ezut√°n d√∂nthet√ºnk, hogy Flask-al, vagy valamilyen egysoros HTTP szerverrel
                        akarjuk futtatni a fent √≠rt k√≥dunkat. Az egyszer≈±s√©g, √©s a Flask tudatlans√°gom miatt jelenleg el√©gs√©ges
                        lesz az egyszer≈± megold√°s, futtatva a k√∂vetkez≈ë parancssori k√≥dot az 'index.html' f√°jlt tartalmaz√≥
                        mapp√°ban:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="shell">$ python -m http.server</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Ha minden j√≥l ment, akkor l√°thatjuk is az oldalra kinyomva a JSON √°llom√°nyunk
                        tartalm√°t, olvashat√≥an rendezve. Fontos megeml√≠teni azt, hogy jelen esetben a Nobel-gy≈ëzteseket tartalmaz√≥
                        adatsorunk nem t√∫l nagy, de ha megpr√≥b√°ln√°nk a k√©peket √©s √©letrajzi adatokat tartalmaz√≥ √°llom√°nyt
                        bet√∂lteni, megt√∂rt√©nhetne, hogy el√©rj√ºk a b√∂ng√©sz≈ë s√°vsz√©less√©g√©nek hat√°rait, √©s az adatbeolvas√°s
                        lelass√∫lna. Egy strat√©gia a lass√∫l√°s elker√ºl√©s√©re, ha felosztjuk adatunkat kisebb r√©szekre, k√ºl√∂n√°ll√≥
                        √°llom√°nyokba, legegyszer≈±bben dimenzi√≥kk√©nt felosztva. Egy√©rtelm≈± megold√°s lenne, ha orsz√°g szerint
                        osztan√°nk sz√©t a Nobel-gy≈ëzteseket, n√©h√°ny sornyi Pandas k√≥d meg is tudja ezt tenni:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">import pandas as pd

df_winners = pd.read_json('../data/winners_cleaned.json')

# a name jelen esetben az orsz√°g lesz, a group pedig a gy≈ëztesek
# minden orsz√°g egy k√ºl√∂n √°llom√°ny lesz, amely tartalmazni fogja a gy≈ëzteseket
for name, group in df_winners.groupby('country'):
    group.to_json('../data/winners_by_country/{}.json'.format(name), orient='records')
# nem hozza l√©tre a mapp√°t, ha nincs m√©g l√©trehozva error-t dob</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Teh√°t, a fenti k√≥d l√©trehoz n√©h√°ny tucatnyi √∫j JSON √°llom√°nyt a
                        'winners_by_country' almapp√°n bel√ºl. K√©pesek vagyunk teh√°t mostm√°r orsz√°gra lebontva leh√≠vni az annak
                        megfelel≈ë √°llom√°nyt, megk√≠m√©lve magunkat att√≥l, hogy a teljes neh√©z √°llom√°nyt minden alkalommal bet√∂lts√ºk:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">let loadWinnersCountryJson = function(country) {
    d3.json('../data/winners_by_country/' + country + '.json', function(error) {
        if (error) {
            console.log(error);
        }
    }).then(function (data) {
        d3.select('h2#data-title').text('All the Nobel-winners from ' + country);
        d3.select('div#data pre').html(JSON.stringify(data, null, 4));
    })
}

// egyszer≈±en a f√ºggv√©nnyel leh√≠vhatjuk az √©rdekelt orsz√°g Nobel-adatait
loadWinnersCountryJson('Saint Lucia');</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A megfelel≈ëen rugalmas vizualiz√°ci√≥hoz elengedhetetlen a szort√≠roz√°s,
                        ahogy azt
                        a fenti p√©lda bemutatja, hogy elker√ºlj√ºk a felesleges lek√©rdez√©seket, egy√∫ttal elker√ºlve azt is, hogy
                        t√∫ls√°gosan leterhelj√ºk az adatszervert megn√∂velve a v√°laszid≈ët. Azonban, belegondolva, egyben
                        vesz√©lyforr√°s is a statikus felbont√°s, hiszen minden dimenzi√≥ szerint egy k√ºl√∂n √°llom√°nyt kellene
                        l√©trehozni, amely hossz√∫ t√°von fenntarthatatlan. Ezen a ponton m√°r elkell gondolkoznunk egy webszerver
                        fel√°ll√≠t√°s√°n, amely k√©pes lek√©rdez√©seinket dinamikusan kezelni √©s a sz√°munra sz√ºks√©ges adatot
                        kiv√°lasztani, √°ltal√°ban felhaszn√°l√≥i interakci√≥n kereszt√ºl. A k√∂vetkez≈ëkben ezt fogjok megtanulni a
                        Flask-on kereszt√ºl.
                    </p>
                    <p class="text-lg font-normal">A statikus √°tvitelnek √©s k√©zbes√≠t√©snek megvan a maga l√©tjogosults√°ga, a
                        kor√°bban eml√≠tett okokb√≥l kifoly√≥lag, √©s megkell hagyni t√∂k√©letes megold√°s k√ºl√∂nb√∂z≈ë dem√≥k √©s
                        pr√≥b√°lkoz√°sok eset√©n. Azonban a rugalmass√°g hatalmas h√°tul√ºt≈ëje, hiszen minden f√°jllal rendelkezn√ºnk kell
                        haszn√°lata el≈ëtt, nem tudjuk azt dinamikusan, a programk√≥d fut√°sa sor√°n el√©rni. Legfontosabb, hogy
                        k√ºl√∂nb√∂z≈ë felhaszn√°l√≥i hiteles√≠t√©sek, p√©ldak√©ppen egy egyszer≈± bejelentkez√©s, vagy b√°rmif√©le session
                        menedzsel√©s, hogy korl√°tozzuk a felhaszn√°l√≥k hozz√°f√©r√©s√©t mondhatni sokkal bonyol√∫ltabb lenne statikus
                        √°llom√°nyokkal. Ha blokkolni akarod bizonyos felhaszn√°l√≥k bizonyos f√°jlokhoz val√≥ hozz√°f√©r√©s√©t, sokkal
                        egyszer≈±bb √©s kultur√°ltabb megold√°s, ha azt egy API h√≠v√°son kereszt√ºl teszed. √ñsszefoglalva, oka van
                        annak, hogy az adatb√°zisok fel lettek tal√°lva, tov√°bb√° oka van annak is, hogy mi√©rt ny√∫ln√°l sz√≠vesebben
                        API-khoz amikor komplex vagy nagym√©ret≈± adatokat √©s azokhoz val√≥ hozz√°f√©r√©st kezelsz.
                    </p>
                    <p class="text-lg font-normal">Ha dinamikus tov√°bb√≠tunk valamilyen adatot, abban az esetben sz√ºks√©g√ºnk lesz
                        valamilyen API-ra, hogy lehet≈ëv√© tegye, hogy JavaScript-b≈ël lek√©rj√ºk az adatokat. A Flask eset√©ben
                        megfigyelhetj√ºk, hogy mennyire is egyszer≈± fel√°ll√≠tani egy RESTful API-t, amely kezelheti az ilyen
                        h√≠v√°sokat:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">from flask import Flask, request, abort
from pymongo import MongoClient
from bson.json_util import dumps, default

app = Flask(__name__)

db = MongoClient().nobel_prize

@app.route('/api/winners')

def get_country_data():
    query_dict = {}

    for key in ['country', 'category', 'year']:
        # a lenti met√≥dus elr√©het≈ëv√© teszi sz√°munkra a lek√©rdez√©s argumentumjait
        # amely valahogy √≠gy n√©z ki: '?country=Australia&category=Chemistry'
        arg = request.args.get(key)

        # majd a lek√©rdez√©s argumentumjai szerint √∂ssze√°ll√≠tjuk az API h√≠v√°s lek√©rdez√©s√©t
        if arg:
            query_dict[key] = arg

    # leh√≠vjuk az adatb√°zisb√≥l a lek√©rdez√©s elemeit
    winners = db.winners_cleaned.find(query_dict)

    # ha siker√ºlt
    if winners:
        # a dumps met√≥dus nem √∫gy, mint a json.dumps met√≥dus, k√©pes szerializ√°lni m√©g d√°tum objektumokat is JSON-n√°.
        # a szerializ√°l√°s m√©gegyszer az a folyamat, amely sor√°n a komplex adatszerkezeteket byte streamm√© alak√≠tjuk
        return dumps(winners)

    # ha nem siker√ºlt le√°ll√≠tjuk 404-es st√°tuszk√≥ddal
    abort(404)

if __name__ == '__main__':
    app.run(port=8000, debug=True)</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Teh√°t, a fenti app-unk lek√©r n√©h√°ny gy≈ëztest az adatb√°zis dokumentumj√°b√≥l vagy
                        t√°bl√°j√°b√≥l, a megadott argumentumok alapj√°n. N√©zz√ºk is meg az API-nkat m≈±k√∂d√©s k√∂zben, el≈ësz√∂r a kor√°bban
                        is haszn√°lt m√≥don elind√≠tjuk az API-nkat:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="shell">$ ipython .\nobel_viz.py
 * Serving Flask app "nobel_viz" (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: on
 * Restarting with windowsapi reloader
 * Debugger is active!
 * Debugger PIN: 343-620-977
 * Running on http://127.0.0.1:8000/ (Press CTRL+C to quit)</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Majd haszn√°lva a Python interpreterj√©t megkezdj√ºk a lek√©rdez√©seket:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">import requests

response = response.get('http://127.0.0.1:8000/api/winners', params={'country': 'Australia'})
response.json()
# ...</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Mivel a Flask-unk Debug m√≥dban fut, ez√©rt √©rdekes r√©szleteket figyelhet√ºnk meg
                        a parancssorban a lek√©rdez√©s√ºnkr≈ël:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="shell">[13/Jul/2020 23:22:10] "GET /api/winners?country=Australia HTTP/1.1" 200 -</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Nem √∫gy, mint a statikus adataink eset√©n az el≈ëz≈ë r√©szb≈ël, most nem vagyunk
                        egyetlen dimenzi√≥ra korl√°tozva, egyszer≈±en tehet√ºnk olyant, hogy lek√©rj√ºk az √∂sszes k√©mia Nobel-gy≈ëztest
                        N√©metorsz√°gb√≥l:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="shell">response = requests.get('http://127.0.0.1:8000/api/winners', params={'country': 'Germany', 'category': 'Chemistry'})</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Bekapcsolva az SQL adatb√°zisunkat, k√©pesek vagyunk a fenti megk√∂zel√≠t√©st SQL
                        adatb√°zisokra is adapt√°lni:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="python">from flask import Flask, request, abort
import dataset
from bson.json_util import dumps, default

app = Flask(__name__)

db = dataset.connect('mysql+pymysql://root@localhost/nobel_prize')

@app.route('/api/winners')
def get_country_data():
    print('Request args: {}'.format(str(dict(request.args))))

    query_dict = {}

    for key in ['country', 'category', 'year']:
        arg = request.args.get(key)

        if arg:
            query_dict[key] = arg

    winners = db['winners_cleaned'].find(**query_dict)

    if winners:
        return dumps(winners)

    abort(404)

if __name__ == '__main__':
    app.run(port=8000, debug=True)</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A lek√©rdez√©sek ugyan√∫gy m≈±k√∂dnek, mint a kor√°bbi p√©ld√°ban. Mostm√°r elmondhat√≥, hogy elk√©sz√≠tett√ºk √©let√ºnk els≈ë RESTful API-j√°t, amellyel lek√©rdezhetj√ºk saj√°t adatb√°zisukban t√°rolt adatsorunkat. Sz√°mos m√≥don kilehetne eg√©sz√≠teni, mondhatni, ez csak a j√©ghegy cs√∫csa. Azonban, az eml√≠tett egyszer≈± lek√©rdez√©seken t√∫l a RESTful API m√©g sz√°mos funkcional√≠t√°ssal rendelkezik: pagination, hiteles√≠t√©s. Szerencs√©nkre, nem kell mindent magunknak meg√≠rni, a Flask egy rendk√≠v√ºl n√©pszer≈± platform, √©s szinte mindenre gondoltak m√°r el≈ëtt√ºnk, √≠gy sok pluginnal rendelkezik. A tov√°bbiakban a pluginok k√∂z√ºl fogunk kett≈ëvel megismerkedni, egy SQL-el √©s egy MongoDB-alap√∫ NoSQL-el. Ezek a pluginok/k√∂nyvt√°rok lehet≈ëv√© teszik azt, hogy teljes √©rt√©k≈± RESTful API-kat hozzunk l√©tre, mind√∂ssze n√©h√°ny sornyi Python-b√≥l, biztos√≠tva mindazon adat kiv√°laszt√°sokat, amikre csak az utunk sor√°n sz√ºks√©g√ºnk lehet.
                    </p>
                    <p class="text-lg font-normal">De, azonban felmer√ºlhet a k√©rd√©s, hogy mikor sz√ºks√©ges egyik vagy m√°sik megold√°st v√°lasztanunk, a statikus vs. dinamikus t√∂rt√©netben. Nem l≈ëhet√ºnk nagy mell√©, ha azt az alapszab√°lyt fektess√ºk le, hogy a helyzet v√°logatja. Amennyiben a megjelen√≠tend≈ë adatunk nagy, vagy jelent≈ës interakci√≥t tenne leh≈ët√©v mindenk√©pp dinamikust v√°lasszunk. De, ha egy kis v√°rakoz√°s, bet√∂lt√©s, az elej√©n megengedhet≈ë, am√≠g az adat becachel, hogy ut√°na vill√°mgyors vizualiz√°ci√≥t tegyen lehet≈ëv√©, akkor j√≥ a statikus is. H√ºvelykujj-szab√°ly, hogy ha az adatsorunk nem haladja meg a 200 KB-ot, rendben lesz√ºnk a statikus k√©zbes√≠t√©ssel, azonban miut√°n √°tl√©p√ºnk a MB-nyi adatokba, tal√°n jobb lenne, ha adatb√°zis-alap√∫ API-kra t√©rn√©nk √°t.
                    </p>
                </section>
            </section>

            <!-- √∂t√∂dik r√©sze v√©ge -->

            <div class="my-8 flex content-center">
                <button
                    class="flex-auto w-24 bg-gray-900 text-white group hover:bg-blue-800 transition duration-75 ease-in rounded-md"><a
                        class="block px-4 py-2"
                        href="3.html"><span class="inline-block font-normal transform group-hover:-translate-x-1 transition
                            duration-100 ease-in">&larr;</span>
                        El≈ëz≈ë</a></button>
                <!-- <button class="flex-auto w-24 ml-4 py-2 bg-gray-900 text-white group hover:bg-blue-800 transition duration-75
                    ease-in rounded-md"><a class="block px-4"
                        href="5.html">K√∂vetkez≈ë
                        <span
                            class="inline-block font-normal transform group-hover:translate-x-1 transition duration-100 ease-in">&rarr;</span></a></button> -->
            </div>
        </main>

        <div id="arr"
            class="fixed block transition duration-100 ease-in"><a class="inline-block text-3xl py-3 px-6 hover:text-blue-800 transition duration-100 ease-in transform hover:scale-125
                opacity-50 hover:opacity-100"
                href="#menu">&uarr;</a></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.10.2/underscore-min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
        <script src="../tools/pushy-1.3.0/js/pushy.min.js"></script>
        <!-- cross-platform megold√°s a smooth-scroll-ra, jQuery haszn√°lat√°val -->
        <script src="../javascript/smooth.js"></script>
        <script src="../javascript/main.js"></script>
        <script src="../javascript/introd3.js"></script>
    </body>

</html>