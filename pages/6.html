<!DOCTYPE html>
<html lang="en"
    class="text-black text-base md:text-lg antialiased leading-relaxed tracking-normal break-normal bg-white">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
            content="width=device-width, initial-scale=1.0">
        <meta name="description"
            content="A repo for studying a book.">
        <meta name="keywords"
            content="visualization,javascript,python,d3,flask,restful">
        <meta name="author"
            content="Luk√°cs Zsolt">
        <meta http-equiv="X-UA-Compatible"
            content="ie=edge">
        <title>6 Az adatok √°br√°zol√°sa</title>
        <link rel="stylesheet"
            href="../css/style.css">
        <!-- Safari-n az emoji favicon nem m≈±k√∂dik -->
        <link rel="icon"
            href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22
                viewBox=%220
                0
                100
                100%22><text y=%22.9em%22
                    font-size=%2290%22>üìï</text></svg>">
    </head>

    <body class="overflow-x-hidden">
        <!-- navig√°ci√≥ -->
        <nav class="pushy pushy-left">
            <div class="pushy-content">
                <ul>
                    <li class="pushy-link"><a href="../index.html">1 Bevezet√©s</a></li>
                    <li class="pushy-link"><a href="2.html">2 Els≈ë l√©p√©sek az adatvizualiz√°ci√≥ban</a></li>
                    <li class="pushy-link"><a href="3.html">3 Az adatok megszerz√©se</a></li>
                    <li class="pushy-link"><a href="4.html">4 Az adatok tiszt√≠t√°sa √©s feldolgoz√°sa</a></li>
                    <li class="pushy-link"><a href="5.html">5 Az adatok eljuttat√°sa</a></li>
                    <li class="pushy-link"><a href="6.html">6 Az adatok √°br√°zol√°sa</a></li>
                </ul>
            </div>
        </nav>

        <!-- Pushy-hoz site overlay -->
        <div class="site-overlay"></div>

        <main id="container"
            class="container p-8 md:p-6 max-w-2xl md:max-w-4xl min-h-screen mx-auto xl:ml-64">
            <button id="menu"
                class="menu-btn px-4 py-2 bg-gray-900 text-white hover:bg-blue-800 transition duration-75 ease-in rounded-md">&#9776;
                Men√º</button>

            <!-- negyedik r√©sze eleje -->

            <section class="pb-8">
                <h1 class="text-3xl md:text-4xl py-8 text-gray-900 font-semibold">6 Az adatok √°br√°zol√°sa</h1>

                <section id="6imaginingnobelvizualization">
                    <h2 class="text-2xl pb-4 font-semibold text-gray-800">Tervezz√ºk meg a vizualiz√°ci√≥nkat</h2>
                    <p id="firstPar"
                        class="text-lg font-normal pb-3">Kor√°bban mondhatni v√©gign√©zt√ºk a Nobel-d√≠jas adatsorunkat kutatva olyan
                        r√©szletek ut√°n, amelyeket meg√©rn√© kiemelni a vizualiz√°ci√≥ sor√°n. Az egyik √©rdekes r√©szlet a n≈ëi fizika
                        Nobel-gy≈ëztesek k√∂z√∂tt volt, hiszen Maria Goeppertr≈ël √©s a mind√∂ssze 2 √©ve nyert Donna Stricklandr≈ël
                        szinte senki sem hallott. A m√°sodik √©rdekes dolog az amerikai Nobel-gy≈ëztesek megugr√°sa volt a 2.
                        Vil√°gh√°bor√∫ ut√°n. A harmadik a kontinent√°lis gy≈ëzelmek eloszl√°sa volt, v√©g√ºl a negyedik a skandin√°v orsz√°g
                        dominanci√°ja az egy f≈ëre jut√≥ Nobel-gy≈ëztesek rangsor√°ban.</p>
                    <p class="text-lg font-normal pb-3">Alapvet≈ëen, a fent √°br√°zolt elemek √°br√°zol√°s√°hoz k√ºl√∂nb√∂z≈ë vizualiz√°ci√≥s
                        elemekre van sz√ºks√©g√ºnk. A nemzeti Nobel √∂sszehasonl√≠t√°s legjobban egy konvencion√°lis oszlopdiagrammal
                        lehetne bemutatni, de ezzel szemben a f√∂ldrajzi eloszl√°sra sz√ºks√©g√ºnk lesz egy t√©rk√©pre. Ebben a r√©szben
                        megfogjuk el≈ësz√∂ris tervezni az interakt√≠v vizualiz√°ci√≥nkat, amely mag√°ba foglalja a fent eml√≠tett
                        kulcst√∂rt√©neteket, amelyeket felfedezt√ºnk.</p>
                    <p class="text-lg font-normal pb-3">Az els≈ë dolog, amit megkell fontolnunk amikor egy vizualiz√°ci√≥t hozunk
                        l√©tre √©s
                        egy√∫ttal azt megel≈ëz≈ëen meg is tervez√ºnk, hogy kinek is sz√≥l az. Teh√°t, att√≥l f√ºgg≈ëen, hogy milyen
                        k√∂rnyezetben k√≠v√°njuk azt megjelen√≠teni, elt√©r≈ë m√≥dok k√∂z√ºl v√°laszthatunk, m√©g akkor is, ha elmondhat√≥ az,
                        hogy a h√°tt√©rben ugyanaz az adatsor √°ll. Term√©szetesen, a mi eset√ºnk, egyfajta inform√°lis vizualiz√°ci√≥r√≥l
                        besz√©lhet√ºnk, ahol √∫m. nincs semmif√©le megk√∂t√©s az √°br√°zol√°st tekintet≈ëen, a mi vizualiz√°ci√≥nknak k√©t f≈ë
                        c√©lja van, hogy: inform√°ljon √©s sz√≥rakoztasson.</p>
                    <p class="text-lg font-normal pb-3">Tervez√©skor az els≈ë dolgunk meghat√°rozni azt, hogy milyen vizu√°lis
                        elemekkel fogunk dolgozni. A k√∂nyv szerint haladva, jelen esetben annyira egyszer≈± kellene, hogy legyen a
                        vizualiz√°ci√≥, hogy bemutassa √©s megtan√≠tsa a kulcsfontoss√°g√∫ D3 k√∂nyvt√°r elemeket, de m√©g ha nem is
                        besz√©lhetn√©nk err≈ël a megk√∂t√©sr≈ël, akkor is elmondhat√≥ √©s betartand√≥ szab√°ly lehetne az, hogy pr√≥b√°ljuk
                        lekorl√°tozni minden esetben a vizualiz√°ci√≥nk elemeit. Term√©szetesen, ez kontextusf√ºgg≈ë, azonban a
                        vizualiz√°ci√≥k eset√©n is elmondhat√≥ rengeteg alkalommal az, hogy a kevesebb, n√©ha t√∂bb, t√∫l sok
                        interkativit√°s leterhelheti a felhaszn√°l√≥t (paradox of choice), √©s ferd√≠theti azt a t√∂rt√©netet, amit el
                        szerett√ºnk volna mondani.</p>
                    <p class="text-lg font-normal pb-3">Ezt √©szbentartva gondolkozzunk el, hogy milyen kulcsfontoss√°g√∫ vizu√°lis
                        elemek kell szerepeljenek a vizualiz√°ci√≥nkban.</p>
                    <p class="text-lg font-normal pb-3">Egyfajta men√ºbarra mindenk√©pp sz√ºks√©g√ºnk lesz, lehet≈ëv√© t√©ve a
                        felhaszn√°l√≥nak, hogy bele√©lje mag√°t a vizualiz√°ci√≥ba √©s manipul√°lja az adatokat. R√∂viden √©s t√∂m√∂ren, a
                        men√ºbar fogja sz≈±rhet≈ëv√© tenni az adatainkat. Ide√°lis esetben a vizualiz√°ci√≥nk megkellene, hogy jelen√≠tse
                        a d√≠jakat, √©vekre lebontva, √©s ez a megjelen√≠t√©s friss√≠teni kellene √∂nmag√°t, att√≥l f√ºgg≈ëen, hogy a
                        men√ºbarban a felhaszn√°l√≥ √©ppen mit v√°lasztott ki. Itt j√∂nne k√©pbe a kor√°bban eml√≠tett t√©rk√©p is, amely
                        kiemeln√© a d√≠jnyertes orsz√°gokat, m√°r eml√≠teni sem kell, hogy ez is friss√≠ten√© √∂nmag√°t a sz≈±r√©snek
                        megfelel≈ëen. Az oszlopdiagram tudja legjobban bemutatni azt, hogy milyen k√ºl√∂nbs√©gek figyelhet≈ëk meg az
                        orsz√°gok k√∂z√∂tt d√≠jak tekintet√©ben. Valamint, egy olyan opci√≥t is biztos√≠tanunk kell, amely lehet≈ës√©get
                        biztos√≠t arra, hogy a felhaszn√°l√≥ eld√∂ntse abszol√∫t, vagy egy f≈ëre jut√≥ d√≠jak tekintet√©ben szeretn√© az
                        √∂sszehasonl√≠t√°st v√©gezni.</p>
                    <p class="text-lg font-normal pb-3">Hogy egyfajta szem√©lyess√©get is bevigy√ºnk a t√∂rt√©netben, k√©pes kellene,
                        hogy legyen a felhaszn√°l√≥, hogy kiv√°lasszon egy√©ni gy≈ëzteseket, √©s azut√°n megjelen√≠ts√ºk neki a k√©pet,
                        amennyiben rendelkez√©sre √°ll, valamint az √©letrajzi bekezd√©seket. Ehhez sz√ºks√©g√ºnk lesz egy list√°ra, az
                        √©ppen kiv√°lasztott gy≈ëztesekr≈ël, √©s egy ablakra, ahol a kiv√°lasztott gy≈ëztest jelen√≠ts√ºk meg.</p>
                    <p class="text-lg font-normal pb-3">A v√©gs≈ë vizualiz√°ci√≥ hasonl√≥k√©ppen kellene, hogy kin√©zzen, azonban ez
                        id≈ëk√∂zben m√©g v√°ltozhat:</p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig65.png"
                            alt="√Åbra 65">
                        <figcaption class="text-center pt-3 pb-4 text-md">65. √Åbra: A Nobel-vizualiz√°ci√≥s dashboard mint√°ja
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal pb-3">Egy interakt√≠v vizualiz√°ci√≥ az√©rt interakt√≠v, mert a felhaszn√°l√≥ k√©pes
                        befoly√°solni a megjelen√≠t√©st, att√≥l f√ºgg≈ëen, hogy a rendelkez√©s√©re bocs√°jtott opci√≥k k√∂z√ºl ≈ë mit v√°laszt
                        ki. Ilyen √©rtelemben, a mi opci√≥inkkal is els≈ëk√©nt fog a felhaszn√°l√≥ tal√°lkozni √©s a dashboard-unk tetej√©n
                        fog megjelenni. Egy egyszer≈± m√≥d arra, hogy √©rdekes felfedez√©sekre vezess√ºk a felhaszn√°l√≥t, hogy
                        lehet≈ës√©get adunk neki, hogy kulcsdimenzi√≥k szerint sz≈±rje az adatokat, n√°lunk a kulcsdimenzi√≥k k√∂z√©
                        tartozik a kateg√≥ria, a nem √©s v√©g√ºl az orsz√°g. Ezek a sz≈±r√∂k ugyanakkor halmoz√≥dnak is, teh√°t, ha
                        kiv√°lasztja a felhaszn√°l√≥, hogy a n≈ëi fizikagy≈ëzteseket akarja, akkor azokat is kapja vissza, k√©t sz≈±r√∂t
                        be√°ll√≠tva. Valamint, a sz≈±r√∂k mell√© m√©g hozz√°f≈±z√ºnk egy gombos v√°laszt√°st is, ahol a felhaszn√°l√≥
                        kiv√°laszthatja, hogy abszol√∫t vagy egy f≈ëre jut√≥ mutat√≥kban szeretn√© l√°tni a nemzeti gy≈ëztesek ar√°ny√°t.
                    </p>
                    <p class="text-lg font-normal pb-3">A k√∂vetkez≈ë elem√ºnk a dashboardon az id≈ësorunk. Az id≈ësorra az√©rt van
                        sz√ºks√©g, mert ez a legjobb m√≥d arra, hogy a nyertesek alakul√°s√°t id≈ëben nyomon k√∂vess√ºk, valamint azt is
                        bemutassuk egy√∫ttal, hogy nemek tekintet√©ben az eg√©sz hogyan alakult, vagy orsz√°g vagy kateg√≥ria
                        tekintet√©ben is ak√°r. A Nobel-vizualiz√°ci√≥nk hozz√°vet≈ëlegesen 1000px sz√©les lesz, √©s 118 √©vet kell az
                        id≈ësor lefedjen, teh√°t hozz√°vet≈ëlegesen 8px fog rendelkez√©s√ºnkre √°llni d√≠jakk√©nt, elegend≈ë ahhoz, hogy
                        megk√ºl√∂nb√∂ztess√ºk ≈ëket. A legt√∂bb d√≠jat 2000-ben osztott√°k ki, mintegy 14-et, ez √°ltal meghat√°rozhatjuk az
                        id≈ësorunk minim√°lis magass√°g, ami 14x8=112px, teh√°t nagyj√°b√≥l 120px, hogy kicsit legyen magasabb. Ahogy a
                        fenti √°bra is bemutatja a d√≠jak megk√ºl√∂nb√∂ztet√©se √∫gy a legk√∂nnyebb, ha sz√≠nk√≥duljuk ≈ëket. Az id≈ësor a
                        most k√∂vetkez≈ë t√©rk√©p ut√°n a vizualiz√°ci√≥nk egyik k√∂zponti eleme, √≠gy viszonylag azonnal l√°that√≥ helyen, a
                        dashboard-unk tetej√©n fog elhelyezkedni a t√©rk√©p f√∂l√∂tt.
                    </p>
                    <p class="text-lg font-normal pb-3">A t√©rk√©pez√©s a D3 egyik legnagyobb er≈ëss√©ge. Elmondhat√≥ az, hogy a
                        t√©rk√©pek teljesen magukkalragad√≥k, azonban sok esetben t√∫lhaszn√°lt √°br√°zol√°si form√°r√≥l besz√©lhet√ºnk, √©s
                        nagyon vizsg√°zni kell azzal, hogy ne pr√≥b√°ljunk meg nem-f√∂ldrajzi jelleg≈± adatokat ilyen m√≥don
                        megjelen√≠teni. De a mi eset√ºnkben, amikor a Nobel-gy≈ëztesek ar√°ny√°t kontinensi eloszl√°sban akarjuk
                        vizsg√°lni, ez a megjelen√≠t√©s majdhogynem t√∂k√©letes. A t√©rk√©pez√©st √∫gy fogjuk megoldani, ahogy azt a fenti
                        √°bra is szeml√©lteti, teh√°t minden nyertes orsz√°g ter√ºlet√©re egy piros k√∂rt fogunk elhelyezni, amelyek
                        m√©rete a nyertesek ar√°ny√°t√≥l fog f√ºggni, ugyanakkor az √°tl√°tsz√≥s√°gra az√©rt van sz√ºks√©g, mert olyan
                        kontinensek eset√©n, mint p√©ldak√©ppen Eur√≥pa, ahol viszonylag sok nyertes van, de az orsz√°gok egyenk√©nti
                        f√∂ldrajzi ter√ºlete kicsi, ezek a k√∂r√∂k egym√°sra fognak fek√ºdni, de az √°tl√°tsz√≥s√°ggal ezt a probl√©m√°t
                        megoldottuk, √©s egyfajta d√≠j-s≈±r≈±s√©get is szeml√©lteti tudunk. A t√©rk√©p eset√©ben, m√©g egy kis tooltip-et is
                        fogunk l√©trehozni, a kurzorunkat az orsz√°g ter√ºlet√©re vive megkapjuk a nyertesek sz√°m√°t.
                    </p>
                    <p class="text-lg font-normal pb-3">A k√∂vetkez≈ë elem az oszlopdiagram a dashboard alj√°n, amely nemzetk√∂zi
                        lebont√°sban mutatja be a gy≈ëztesek sz√°m√°t. Az oszlopdiagram sor√°n azt szeretn√©nk, hogy mindk√©t tengely
                        dinamikusan v√°ltozni a felhaszn√°l√≥i interakci√≥ra, √©s mindezt egy anim√°lt 'transition'-el megoldva,
                        szerencs√©re a D3 eset√©n egyszer≈± dolgunk van.
                    </p>
                    <p class="text-lg font-normal">Nem besz√©lt√ºnk m√©g a dashboard jobb oldal√°n megjelen≈ë list√°r√≥l, amely a
                        felhaszn√°l√≥ √°ltal megadott sz≈±r√∂k szerint megfelel≈ë gy≈ëzteseket tartalmazza. Ebben az esetben kicsit
                        korl√°toz√≥k lesz√ºnk, √©s hab√°r megtudn√°nk azt csin√°lni, hogy a felhaszn√°l√≥ k√©pesl egyen oszlopok szerint
                        rendezni a sorrendet, mi m√©gis √©v szerinti cs√∂kken≈ë sorrendre fogjuk korl√°tozni. A list√°val szoros
                        √∂sszef√ºgg√©sben van, az alatta megjelen≈ë √©letrajzi dobozocska, amely az √°ltalunk scrapelt k√©pet √©s
                        √©letrajzi inform√°ci√≥kat fogja tartalmazni, annak a gy≈ëztesnek, amelyet a fenti list√°b√≥l a felhaszn√°l√≥
                        kiv√°lasztott. √ârdekess√©gk√©nt, elfogunk helyezni a doboz tetej√©n egy sz√≠nes cs√≠kot, amely annak a
                        kateg√≥ri√°nak a sz√≠nk√≥dj√°val fog megegyezni, amelyben a kiv√°lasztott Nobel-d√≠jas nyert.
                    </p>
                </section>

                <section id="6buildingvizualization">
                    <h2 class="text-2xl pt-8 pb-4 font-semibold text-gray-800">√âp√≠ts√ºk meg a vizualiz√°ci√≥nkat</h2>
                    <p class="text-lg font-normal pb-3">Teh√°t, az el≈ëz≈ë r√©szben meg√°lmondtunk egy valamire val√≥, de mondhatni
                        rosszul kin√©z≈ë vizualiz√°ci√≥t, amire r√°foghatjuk, hogy els≈ë alkalomra el√©gs√©ges lesz. Ebben a r√©szben meg
                        is √≠rjuk, megfigyelve m≈±k√∂d√©s k√∂zben a m√°r sokszor eml√≠tett D3 k√∂nyvt√°rat.</p>
                    <p class="text-lg font-normal pb-3">Miel≈ëtt azonban nekifoghatn√°nk, el≈ësz√∂ris gondoljuk v√©gig melyek azok az
                        alapvet≈ë komponensek, amelyekre sz√ºks√©g√ºnk lesz, valamint m√©gfontosabb, hogy hogyan fogjuk a f√°jlainkat
                        elrendezni. Ahogy azt kor√°bban is l√°thattuk, egy web vizualiz√°ci√≥hoz n√©gy kulcselemre van sz√ºks√©g√ºnk: egy
                        HTML gerincre, amelyen a JavaScript√ºnk fog megjelenni, CSS st√≠lusokra, JavaScript √°llom√°nyok, minden
                        hozz√°juk tartoz√≥ k√∂nyvt√°rral egy√ºtt, amit felhaszn√°lunk √©s v√©g√ºl maga az adat, amit megjelen√≠t√ºnk,
                        statikus vagy dinamikus form√°ban.</p>
                    <p class="text-lg font-normal pb-3">A mappaorganiz√°ci√≥ra tekintettel, k√∂vetni fogjuk a kor√°bban eml√≠tett
                        szabv√°nyok egyik√©t, amely megfigyelhet≈ë a jegyzet mapp√°i k√∂z√∂tt.</p>
                    <p class="text-lg font-normal pb-3">A megval√≥s√≠t√°s sor√°n a statikus √©s dinamikus adat√°tvitel √∂tv√∂zet√©t fogjuk
                        haszn√°lni. A statikus adat√°llom√°nyok a 'static' mapp√°ban ker√ºlnek t√°rol√°sra, a dinamikus adatokat pedig
                        MongoDB-n t√°roljuk, amelyeket a Python Eve RESTful API-j√°n kereszt√ºl fogunk ig√©ny szerint el√©rni.
                        Igaz√°b√≥l, a dinamikus adat√°tvitelre sem lenne nagy sz√ºks√©g, az adatsorunk, b√°rminem≈± t√∂m√∂r√≠t√©s n√©lk√ºl
                        mind√∂ssze 3 MB k√∂r√ºl van, kiss√© er≈ëltetettnek is mondhat√≥, azonban e f√∂l√∂tt, m√°r gondokat okozhat a
                        cachel√©s √©s rendk√≠v√ºl lelass√≠thatja a bet√∂lt√©st, felesleges frusztr√°lva a felhaszn√°l√≥t. Azonban, jobb, ha
                        megbar√°tkozunk a dinamikus adat√°tvitellel, hiszen √≠gy k√©s≈ëbb, nagyobb projektek eset√©ben nem okoz majd
                        gondot, egy egyszer≈± √©s robosztus API fel√°ll√≠t√°sa sem.</p>
                    <p class="text-lg font-normal pb-3">Hab√°r, a Nobel vizualiz√°ci√≥nk sz√°mos dinamikus komponenssel rendelkezik, a
                        HTML gerinc amire sz√ºks√©gs√ºnk lesz meglep≈ëen egyszer≈±. Megintcsak bebizony√≠tva azt, hogy meglehet≈ës√©ges
                        kev√©s hagyom√°nyos webfejleszt≈ëi tud√°s sz√ºks√©g√ºnk az adatok k√©perny≈ë vitel√©hez.</p>
                    <p class="text-lg font-normal pb-3">Az 'index.html' √°llom√°ny, amely gerinc√©t k√©pzi a vizualiz√°ci√≥nknak h√°rom
                        f≈ë komponenssel rendelkezik: egy CSS st√≠lus importtal, amely be√°ll√≠t bizonyos dolgokat, p√©ldak√©ppen a
                        fontot, a tartalom-blokkok elhelyezked√©s√©t, stb., HTML placeholderekkel a vizu√°lis elemeinkhez, amelyek
                        mind <em>nobel-[foo]</em> id-kkal rendelkeznek, √©s v√©g√ºl JavaScript komponenssel is rendelkezni fog,
                        el≈ësz√∂ris a k√ºl√∂nb√∂z≈ë k√∂nyvt√°rak importj√°val, majd a saj√°t scriptjeinkkel.</p>
                    <p class="text-lg font-normal pb-3">A l√©trehozott HTML gerinc√ºnk, amely megtekinthet≈ë a 'final' mapp√°n bel√ºl,
                        meghat√°rozza a hierarchikus fel√©p√≠t√©s√©t a
                        Nobel-vizualiz√°ci√≥s komponenseinknek, de b√°rmif√©le vizu√°lis megjelen√©s√ºk, st√≠lusuk √©s elrendez√©s√ºk a
                        CSS-b≈ël lesz
                        meghat√°rozva.</p>
                    <p class="text-lg font-normal pb-3">A HTML-ben meghat√°rozott valamennyi 'chart' komponenst k√ºl√∂n fogjuk
                        st√≠lussal ell√°tni, a sz√°munkra l√©trehozott r√©szben. Az els≈ë probl√©ma amibe m√°r a CSS meghat√°roz√°s√°nak
                        legelej√©n belefuthatunk, hogy mekkora is legyen a vizualiz√°ci√≥nk m√©rete. Manaps√°g nagyon sok f√©le
                        k√©perny≈ëm√©ret, √©s eszk√∂z van a piacon. Egy √©rthet≈ë megfontol√°s manaps√°g az, hogy felt√©telezz√ºk, hogy egy
                        eszk√∂z legal√°bb <em>1280x800</em> pixeles k√©perny≈ëm√©rettel rendelkezik. A mi vizualiz√°ci√≥nk
                        hozz√°vet≈ëlegesen 1000x800 pixelnyi lesz.</p>
                    <p class="text-lg font-normal">Els≈ëk√©nt, √°ltal√°nos st√≠lusokat fogunk be√°ll√≠tani, amelyet a teljes
                        dokumentumra √©rtelmez√ºnk:</p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="css">body {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; /* be√°ll√≠tjuk a fontot */
    background: #fefefe; /* be√°ll√≠tjuk a h√°tteret */
    width: 1000px; /* a vizualiz√°ci√≥nk sz√©less√©g√©t */
    margin: 0 auto; /* fels≈ë √©s als√≥ marg√≥k 0px, m√©g a sz√©ls≈ëk auto-k, √≠gy k√∂z√©pre rendez≈ëdik a vizualiz√°ci√≥nk */
}

a:link {
    color: royalblue;
    text-decoration: none; /* linkek eset√©n megv√°ltoztatjuk azok sz√≠n√©t √©s kivessz√ºk az al√°h√∫z√°st */
}

a:hover {
    text-decoration: underline; /* hover eset√©n al√°h√∫zodnak a linkek */
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">H√°rom f≈ë komponens√ºnk van a #chart div-√ºnk√∂n bel√ºl, amelyeket mind abszol√∫t
                        m√≥don fogunk elhelyezni, ilyen √©rtelemben a #chart div-hez relat√≠ven: #title, #info √©s #nbviz. A c√≠m pont
                        szembe fog elhelyezkedni, valamint a main kont√©ner az oldal tetej√©t≈ël 90px-re lesz elhelyezve, hogy legyen
                        egy kis helye leveg≈ëzni, valamint adunk neki egy 100%-os width-et, hogy elfoglalja a teljes szabad helyet:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="css">#chart {
    position: relative;
}

#nbviz {
    position: absolute;
    top: 90px;
    width: 100%;
}

#title {
    position: absolute;
    font-size: 30px;
    font-weight: 100;
    top: 20px;
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A 'chart-holder' 750px-es magass√°ggal fog rendelkezni, valamit ugyancsak
                        100%-os sz√©les√©ggel a parent elemhez viszony√≠tva, v√©g√ºl egy poz√≠ci√≥ relat√≠v property-vel, ami azt fogja
                        eredm√©nyezi, hogy a child elementjei hozz√° visszony√≠tva lesznek absz√≥luton poz√≠cion√°lva, annak bal-fels≈ë
                        sark√°hoz:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="css">#chart-holder {
    width: 100%;
    height: 750px;
    position: relative;
}

#chart-holder svg {
    width: 100%;
    height: 100%; /* erre az√©rt van sz√ºks√©g, mert azt akarjuk, hogy az SVG elemek kontextusa a kont√©ner teljes eg√©sz√©t elfoglalj√°k */
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">Az al√°bbi √°bra bemutatja milyen lenne az optim√°lis m√©retbe√°ll√≠t√°s a
                        vizu√°lis
                        elemeinknek:
                    </p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig66.png"
                            alt="√Åbra 66">
                        <figcaption class="text-center pt-3 pb-4 text-md">66. √Åbra: A Nobel-vizualiz√°ci√≥s dashboard mint√°ja
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal">A fent √°br√°zolt eloszt√°st a k√∂vetkez≈ë CSS k√≥ddal √©rhetj√ºk el:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="css">#nobel-map, #nobel-winner, #nobel-bar, #nobel-time, #nobel-list {
    position: absolute;
}

#nobel-time {
    top: 0;
    height: 150px;
    width: 100%;
}

#nobel-map {
    background: azure;
    top: 160px;
    width: 700px;
    height: 350px;
}

#nobel-winner {
    top: 510px;
    left: 700px;
    height: 240px;
    width: 300px;
}

#nobel-bar {
    top: 510px;
    height: 240px;
    width: 700px;
}

#nobel-list {
    top: 160px;
    height: 340px;
    width: 290px;
    left: 700px;
    padding-left: 10px; /* az√©rt van sz√ºks√©g erre, hogy elv√°lassza a t√©rk√©pt≈ël */
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A t√∂bbi elem CSS megold√°sait akkor fogjuk be√≠rni, amikor az elemek a
                        hely√ºkre ker√ºlnek.
                    </p>
                    <p class="text-lg font-normal pb-3">B√°rmilyen m√©ret≈± √©s kiterjed√©s≈± vizualiz√°ci√≥ eset√©n hasznos dolog, ha m√°r
                        az
                        elej√©n bevezet√ºnk egyfok√∫ modularit√°st, az √°ltal, hogy az eml√≠tett komponenseket, a HTML-t, a CSS-t, a
                        JavaScript-et √©s az adatokat k√ºl√∂n oldalakra szedj√ºk. Hab√°r, sz√°mos m√≥d √©s pr√≥b√°lkoz√°s volt m√°r arra, hogy
                        egy √©rett import/include rendszert vezessenek be a JavaScript-be, ezek m√©g nem teljesen m≈±k√∂dnek √∫gy,
                        ahogy azok kellen√©nek, √≠gy f≈ëleg kezd≈ëk√©nt jobb, ha a megszokott script tag-es megold√°sn√°l maradunk,
                        √ºgyelve a tagek megfelel≈ë sorrendj√©re. Ez egy megbizhat√≥ megold√°s, √©s nincs sz√ºks√©g t√∫lkomplik√°lt build
                        scriptekre, meg hasonl√≥kra, √©s eg√©szen k√∂zepes m√©ret≈± vagy ak√°r kiterjedt vizualiz√°ci√≥k eset√©n is teljesen
                        rendben van.
                    </p>
                    <p class="text-lg font-normal">Teh√°t, a JavaScript √°llom√°nyainkat script tagek seg√≠ts√©g√©vel fogjuk import√°lni,
                        amelyek a body tag v√©ge el≈ëtt, annak alj√°n helyezkednek el:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="html">&#60;!-- k√∂nyvt√°rak -->
&#60;script src="https://d3js.org/d3.v5.min.js">&#60;/script> &#60;!-- D3 k√∂nyvt√°r -->
&#60;script src="https://unpkg.com/topojson@3.0.2/dist/topojson.min.js">&#60;/script> &#60;!-- topojson k√∂nyvt√°r, amely a GeoJSON kieg√©sz√≠t≈ëje, topol√≥gi√°t enk√≥dol -->
&#60;script src="https://cdnjs.cloudflare.com/ajax/libs/d3-queue/3.0.7/d3-queue.min.js">&#60;/script>
&#60;script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js">&#60;/script>
&#60;!-- saj√°t scriptek -->
&#60;script src="../static/js/nbviz_core.js">&#60;/script>
&#60;script src="../static/js/nbviz_menu.js">&#60;/script>
&#60;script src="../static/js/nbviz_map.js">&#60;/script>
&#60;script src="../static/js/nbviz_bar.js">&#60;/script>
&#60;script src="../static/js/nbviz_time.js">&#60;/script>
&#60;script src="../static/js/nbviz_details.js">&#60;/script>
&#60;script src="../static/js/nbviz_main.js">&#60;/script> &#60;!-- a f≈ë elem ker√ºl legal√∫lra, hiszen ez fogja az els≈ë lek√©rdez√©st megejteni az adatokra, √©s megjelen√≠teni --></code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">M√©g a legelej√©n eml√≠tett√ºnk egyfajta megk√∂zel√≠t√©st arra, hogy a JavaScript
                        eset√©n elker√ºlj√ºk a namespace collision-t, az √°ltal, hogy l√©trehozunk egy <em>nbviz</em> namespace-t,
                        tiszt√°n √©s szabadon hagyva a glob√°lis namespace-t, lehet≈ëv√© t√©ve megosztott met√≥dusokat, param√©terek,
                        konstansokat √©s minden egyebet. Minden fent l√°that√≥ m√≥dulunk felfog fedni minden sz√ºks√©ges met√≥dust az
                        nbviz objektumnak, lehet≈ëv√© t√©ve sz√°munkra, hogy azokat m√°s scriptekben is hasznos√≠tsuk:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">/* glob√°lis namespace, √©s _, crossfilter, d3 k√∂nyvt√°r hivatkoz√°sok */
(function(nbviz) {
    'use strict';

    /* ... m√≥dulok, priv√°t v√°ltoz√≥k, stb.. */
    nbviz.foo = function() {
        /* ... */
    };
    /* ezt a met√≥dust felfedi az nbviz objektumnak, √≠gy m√°s scriptekben is haszn√°lhat√≥, az nbviz namespacen bel√ºl */
}(window.nbviz = window.nbviz || {}));
/* l√©trehozza az nbviz objektumot, amennyiben nem √°ll rendelkez√©sre, m√°sk√©pp haszn√°lja a megl√©v≈ët */</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A k√∂vetkez≈ë r√©szekben r√©szletesen megfogjuk besz√©lni azt a JavaScript-et
                        √©s D3
                        eseteket, amelyek l√©trehozz√°k a vizualiz√°ci√≥nk k√ºl√∂nb√∂z≈ë elemeit. De el≈ësz√∂r, az adat√°raml√°ssal fogunk
                        foglalkozni, az adatszervert≈ël eg√©szen a kliens b√∂ng√©sz≈ëig, a kliensen bel√ºl, pedig a felhaszn√°l√≥i
                        interakci√≥ √°ltal vez√©relve.
                    </p>
                    <p class="text-lg font-normal pb-3">Sz√°mos m√≥d √©s megk√∂zel√≠t√©s van arra, hogy adatokat kezelj√ºnk b√°rmilyen
                        kiterjed≈± √©s komplexit√°s√∫ projektben. Interakt√≠v applik√°ci√≥kban √©s f≈ëleg adatvizualiz√°ci√≥ban az egyik
                        legjobb √©s robusztusabb megk√∂zel√≠t√©s az, ha van egy k√∂zponti adatobjektumunk, amely cacheli az √©ppen
                        haszn√°lt adatot. A cachelt adat mellett, m√©g lesz n√©h√°ny akt√≠v t≈±kr√∂z√©se, vagy r√©szhalmaza az √©ppen
                        haszn√°lt adatsornak, ugyanazon adatobjektumon bel√ºl. Egy p√©ld√°n kereszt√ºl lehet ezt az √©rthetetlen
                        mondatot megfogni. A Nobel-vizualiz√°ci√≥nkban a felhaszn√°l√≥ k√©pes az adatsorunk n√©h√°ny r√©szhalmaz√°t
                        kiv√°lasztani, p√©ldak√©ppen csak azokat a gy≈ëzteseket, akik a fizika kateg√≥ri√°ban nyertek. Amennyiben, a
                        felhaszn√°l√≥ egy m√°sik adat t≈±kr√∂z√©s√©t v√°lasztja ki az opci√≥kkal, p√©ldak√©ppen kiv√°lasztja az abszol√∫t
                        mutat√≥ helyett, az egy f≈ëre jut√≥ mutat√≥t, egy √∫n. flag-et fogunk √°t√°ll√≠tani (ebben az esetben, a
                        valuePerCapita-t 0-r√≥l 1-re √°ll√≠tsuk). Majd minden vizu√°lis komponens√ºnk ennek a flag-nek megfelel≈ëen fog
                        alkalmazkodni √©s alakulni. Teh√°t, az adatobjektumunk nem csak az akt√≠v adatot, hanem n√©h√°ny kapcsol√≥d√≥
                        r√©szhalmazt is tartalmazni fog, amelyeket a flag-ekkel √©rhet√ºnk el. A kulcsgondolat ezen a p√©ld√°n
                        kereszt√ºl az, hogy √∫gy √°ll√≠tsuk √∂ssze a vizu√°lis elemeket, hogy azok szinkroniz√°lva legyenek b√°rmilyen
                        felhaszn√°l√≥i adatv√°ltoz√°sra. Egy megbizhat√≥ m√≥d arra, hogy ezt el√©rj√ºk, ha l√©trehozunk egyetlen √∫n. update
                        met√≥dust, amely az eg√©sz megjelen√≠t√©st friss√≠ti (mi eset√ºnkben ez <em>onDataChange</em> lesz), amely
                        minden olyan esetben le lesz h√≠vva, amikor a felhaszn√°l√≥ valami olyant tesz, amely megv√°ltoztatja a
                        megjelen√≠tend≈ë adatokat. Ez a met√≥dus fogja '√©rtes√≠teni' a komponenseket, akik a v√°ltoz√°snak megfelel≈ëen
                        fognak arra v√°laszolni.
                    </p>
                    <p class="text-lg font-normal">A JavaScript √°llom√°nyok k√∂z√ºl, amelyek bet√∂ltenek a legels≈ë a
                        <em>nbviz_core.js</em>. Ez a script fog tartalmazni minden olyan k√≥dot, amelyet a k√ºl√∂nb√∂z≈ë scriptek
                        k√∂z√∂tt megszeretn√©nk osztani. P√©ldak√©ppen, rendelkezni fogunk egy <em>categoryFill</em> met√≥dussal, amely
                        visszat√©r√≠t egy specifikus sz√≠nt minden kateg√≥ri√°nak. Ez a sz√≠nk√≥d azt√°n haszn√°lva lesz mind az id≈ësor,
                        valamint az √©letrajzi doboz eset√©n. Tov√°bb√°, ez a core komponens fog tartalmazni minden olyan k√≥dot is,
                        amelyet tesztel√©sre haszn√°lunk, vagy egyszer≈±en az√©rt, mert egyik m√≥dulhoz sem k√∂thet≈ë k√∂zvetlen√ºl.
                        Jelenleg a core JavaScript f√°jl a k√∂vetkez≈ëket tartalmazza:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">/* glob√°lis namespace, _, crossfilter, d3 hivatkoz√°sok */

(function(nbviz) {
    'use strict';

    nbviz.data = {} // a f≈ë adatobjektumunk
    nbviz.valuePerCapita = 0; // mutat√≥ flag-√ºnk
    nbviz.activeCountry = null; 
    nbviz.ALL_CATS = 'All Categories' // konstans
    nbviz.TRANS_DURATION = 2000; // milliszekundumban meghat√°rozott hossza az anim√°ci√≥knak
    nbviz.MAX_CENTROID_RADIUS = 30;
    nbviz.MIN_CENTROID_RADIUS = 2;
    nbviz.COLORS = {palegold: '#E6BE8A'};  // b√°rmely olyan sz√≠n, amelynek nevet akarunk adni √©s k√©s≈ëbb haszn√°lni
    $EVE_API = 'http://localhost:5000/api/';

    nbviz.CATEGORIES = [
        "Chemistry", "Economics", "Literature", "Peace", "Physics", "Physiology or Medicine"
    ];

    nbviz.categoryFill = function(category) {
        let i = nbviz.CATEGORIES.indexOf(category);
        return d3.hcl(i / nbviz.CATEGORIES.length * 360, 60, 70);
    };

    nbviz.getDataFromAPI = function(resource, callback) {
        d3.json($EVE_API + resource, function(error) {

        }).then(function(data) {

        });
    };

    /* az √ºres r√©szek a kontextusuk sor√°n lesznek tartalommal felt√∂ltve */
    let nestDataByYear = function(entries) {
        // ...
    };

    nbviz.makeFilterAndDimensions = function(winnersData) {
        // ...
    };

    nbviz.filterByCountries = function(countryNames) {
        // ...
    };

    nbviz.filterByCategory = function(cat) {
        // ...
    };

    nbviz.getCountryData = function() {
        // ...
    };

    /* ez a f√ºggv√©ny ker√ºl leh√≠v√°sra, amikor az adatsor megv√°ltozik, hogy friss√≠t≈ëdjenek a vizualiz√°ci√≥s elemek */
    nbviz.onDataChange = function() {
        let data = nbviz.getCountryData();
        nbviz.updateBarChart(data);
        nbviz.updateMap(data);
        nbviz.updateList(nbviz.countryDim.top(Infinity));
        data = nestDataByYear(nbviz.countryDim.top(Infinity));
        nbviz.updateTimeChart(data);
    };

} (window.nbviz = window.nbviz || {}));</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A Nobel-vizualiz√°ci√≥s applik√°ci√≥nk egy sornyi adatlek√©rdez√©ssel fog elindulni
                        az <em>nbviz_main.js</em>-b≈ël. Haszn√°lni fogjuk a D3 <em>queue</em> funkci√≥j√°t, hogy szimult√°n
                        lek√©rdez√©seket ejts√ºnk a statikus adatf√°jlainkra √©s az √∂sszes gy≈ëztes adatsor√°ra. Amikor a queue √∂sszes
                        h√≠v√°sa lefutott, az await met√≥dus √°ltal meghat√°rozott callback f√ºggv√©ny ker√ºl h√≠v√°sra, az adat response-al
                        √©s b√°rmilyen error-al, amely jelentkezett id≈ëk√∂zben:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">const query_winners = 'winners?projection=' + JSON.stringify({"mini_bio": 0, "bio_image": 0});

queue()
    /* a statikus f√°jlok magukba foglalnak egy vil√°gt√©rk√©pet, n√©mi orsz√°gadatot, 
    valamint egy dinamikus leh√≠v√°st a Python Eve RESTful API-nkon kereszt√ºl a gy≈ëztes-adatokra, kihagyva az √©letrajzot */
    .defer(d3.json, "static/data/world-110m.json")
    /* a fenti egy topojson-n√°l megkaphat√≥ t√©rk√©p, 1:110milli√≥hoz sk√°l√°val */
    .defer(d3.csv, "static/data/world-country-names-nobel.csv")
    .defer(d3.json, "static/data/winning_country_data.json")
    .defer(nbviz.getDataFromAPI, query_winners)
    .await(ready);

function ready(error, world, countryNames, countryData, winnersData) {
    // ...
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A queue h√≠v√°sban felhaszn√°ljuk a kor√°bban m√°r l√°tott
                        <em>nbviz.getDataFromAPI</em> met√≥dusunkat, amely mag√°ba foglal egy D3 AJAX h√≠v√°st a Python Eve API-nkhoz:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">/* elfogad egy resource-t (pl. winners?projection={'mini_bio': 0, ...}) 
    √©s egy callback f√ºggv√©nyt, amelyet akkor h√≠vunk le, amikor az API h√≠v√°s m√°r megold√≥dott*/
    nbviz.getDataFromAPI = function(resource, callback) {
        d3.json($EVE_API + resource, function(error) {
            if (error) {
                return callback(error);
            }
        }).then(function(data) {
            /* ha a v√°laszul kapott adatnak van 'items' mez≈ëje, akkor abban az esetben t√∂bb gy≈ëztessel van dolgunk */
            if ('_items' in data) {
                callback(null, data._items);
            } else {
                callback(null, data); /* ellenkez≈ë esetben csakis egyetlen gy≈ëztesr≈ël sz√≥l√≥ adatot k√©rt√ºnk le */
            }
            /* a callback f√ºggv√©ny bevesz egy error, √©s data argumentumot, ez√©rt sz√ºks√©ges a null */
        });
    };</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">Ha a szimult√°n lek√©rdez√©sek sikeresek, abban az esetben a <em>ready</em>
                        f√ºggv√©ny fogja megkapni a lek√©rt adatot, √©s ut√°na k√©pesek vagyunk azokat tov√°bbk√ºldeni a vizu√°lis
                        elemekhez.
                    </p>
                    <p class="text-lg font-normal">Amiut√°n az 'elhalasztott (deferred)' lek√©rdez√©sek az adatunkra megvoltak a
                        queue met√≥dus √°ltal, az ott meghat√°rozott ready f√ºggv√©ny ker√ºl leh√≠v√°sra, amely argumentumk√©nt megkapja az
                        adatsorokat, a lek√©rdez√©sek sorrendj√©ben. Abban az esetben, ha az adat b√°rmif√©le hiba n√©lk√ºl let√∂lt√©sre
                        ker√ºlt, felhaszn√°ljuk a gy≈ëztes adatokat, hogy l√©trehozzuk az akt√≠v sz≈±r√∂t (ekkor haszn√°ljuk a crossfilter
                        k√∂nyvt√°rat), az akt√≠v sz≈±r√∂t fogjuk haszn√°lni, hogy lehet≈ëv√© tegy√ºk, hogy a felhaszn√°l√≥ kiv√°lasszon
                        r√©szhalmazokat a Nobel-gy≈ëztesek k√∂z√ºl, kateg√≥ria, nem √©s orsz√°g alapj√°n. Ezut√°n inicializ√°l√≥ met√≥dusokat
                        fogunk leh√≠vni, √©s v√©g√ºl haszn√°ljuk az onDataChange met√≥dusunkat is, hogy elk√ºldj√ºk a k√©r√©st a vizu√°lis
                        elemek friss√≠t√©s√©re:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">function ready(error, world, countryNames, countryData, winnersData) {
    // logulunk b√°rmif√©le hib√°t a console-ra
    if (error) {
        return console.warn(error);
    }

    // t√°roljuk az orsz√°gadat adatsorunkat
    nbviz.data.countryData = countryData;
    // l√©trehozzuk a sz≈±r√∂nket √©s annak dimenzi√≥it
    nbviz.makeFilterAndDimensions(winnersData);
    // inicializ√°ljuk a men√ºt √©s a t√©rk√©pet
    nbviz.initMenu();
    nbviz.initMap(worldMap, countryNames);
    // triggerelj√ºk a friss√≠t√©st a teljes gy≈ëztes adatsorral
    nbviz.onDataChange();
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig67.png"
                            alt="√Åbra 67">
                        <figcaption class="text-center pt-3 pb-4 text-md">67. √Åbra: Az applik√°ci√≥nk adat√°raml√°sa
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal">Miut√°n a men√º √©s a t√©rk√©p kezdeti √°llapot√°ba lett helyezve a ready
                        f√ºggv√©ny√ºnkben, ut√°na, ahogyan az az √°br√°n is l√°tsz√≥dik, egy friss√≠t√©si folyamatot indittatunk el a
                        vizu√°lis elemek ir√°ny√°ba az onDataChange met√≥dusunkkal, amelyet a nbviz_core.js-ben defini√°ltunk. M√°r
                        t√∂bbsz√∂r is megeml√≠tett√ºk azt, hogy az onDataChange met√≥dus egy megosztott met√≥dus, amelyet minden olyan
                        esetben leh√≠vunk, amikor a megjelen√≠tend≈ë adatok sora megv√°ltozott felhaszn√°l√≥i interakci√≥ v√°lasz√°ul, vagy
                        m√°s esetben, amikor a felhaszn√°l√≥ m√°s mutat√≥t v√°lasztott, abszol√∫t helyett egy f≈ëre jut√≥t, vagy √©ppen
                        ford√≠tva. Az onDataChange met√≥dusunk egyik fontos eleme az els≈ë sorban tal√°lhat√≥:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let data = nbviz.getCountryData();</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A f≈ë adatsor, amelyet az id≈ëvonal, a t√©rk√©p √©s az oszlopdiagram is haszn√°l, a
                        getCountryData met√≥dussal van el≈ë√°ll√≠tva, amely csoportos√≠tja a gy≈ëzteseket orsz√°g szerint, hozz√°ad
                        bizonyos nemzeti inform√°ci√≥kat, mint p√©ld√°ul az adott orsz√°g lakoss√°ga, √©s a nemzetk√∂zi azon√≥s√≠t√≥k√≥dja az
                        orsz√°gnak:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">nbviz.getCountryData = function() {
        // a countryDim az egyik Crossfilter dimenzi√≥nk lesz
        let countryGroups = nbviz.countryDim.group().all();

        // el≈ë√°ll√≠tjuk a f≈ë adathalmazt
        // haszn√°ljuk a t√∂mb map met√≥dus√°t, hogy l√©trehozzunk egy √∫j t√∂mb√∂t a hozz√°adott elemekkel az orsz√°gadatsorunkb√≥l
        let data = countryGroups.map(function(c) {
            // lek√©ri az adatot felhaszn√°lva a csoportkulcsot, pl. 'Australia'
            let cData = nbviz.data.countryData[c.key];
            let value = c.value;
            // ha az egy f≈ëre jut√≥ flag bevan √°ll√≠tva, akkor osztjuk a lakoss√°ggal
            if (nbviz.valuePerCapita) {
                value = value / cData.population;
            }

            return {
                key: c.key, // pl. N√©metorsz√°g
                value: value, // pl. 16 d√≠j
                code: cData.alpha3Code, // pl. DEU
            };
        })
            .sort(function(a, b) {
                return b.value - a.value; // cs√∂kken≈ë sorrend
            });

        return data;
    };</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">Az el≈ëbb m√°r l√°thattuk azt, hogy a getCountryData met√≥dust a friss√≠t≈ë
                        met√≥dusunk hasznos√≠tja, √≠gy valamennyi vizu√°lis elem√ºnk is egyben. Tov√°bb√°, a getCountryData met√≥dusunk
                        haszn√°lja a Crossfilter √°ltal sz≈±rt adatunkat. A k√∂vetkez≈ëkben n√©zz√ºk meg azt, hogy ez a sz≈±r√©s hogyan
                        t√∂rt√©nik, ezzel az eddig ismeretlen k√∂nyvt√°rral.
                    </p>
                    <p class="text-lg font-normal pb-3">A Crossfilter egy olyan magasan optimaliz√°lt k√∂nyvt√°r, amelyet nagym√©ret≈±,
                        t√∂bbv√°ltoz√≥s adatsorok feldolgoz√°s√°ra terveztek JavaScript seg√≠ts√©g√©vel. Nagyon gyorsan tekinthet≈ë, √©s
                        k√∂nny≈±szerrel kezel m√©g olyan adatsorokat is, amelyek messze t√∫lmutatnak a mi, kezdetleges Nobel-d√≠jas
                        adatsorunkon. A Crossfiltert a projekt√ºnk sor√°n arra fogjuk haszn√°lni, hogy sz≈±rj√ºk a gy≈ëztesek adatsor√°t
                        kateg√≥ria, nem √©s orsz√°g dimenzi√≥k szerint. Hab√°r, a Crossfilter-r≈ël elmondhat√≥ az, hogy relat√≠ve nehezen
                        em√©szthet≈ë k√∂nyvt√°r, f≈ëleg akkor, amikor a dimenzi√≥k szerinti sz≈±r√∂k elkezdik keresztezni egym√°st, m√©gis a
                        legt√∂bb 'use-case' egy k√∂z√∂s mint√°t k√∂vet, amelyet m√©gis viszonylag k√∂nnyen meglehet √©rteni. A Crossfilter
                        k√∂nyvt√°rat minden esetben fellehet haszn√°lni, amikor nagy adatsorokb√≥l kell kis r√©szleteket kiv√°gni.
                    </p>
                    <p class="text-lg font-normal">Amikor inicializ√°ltuk a Nobel-vizualiz√°ci√≥nkat a ready met√≥dusun bel√ºl leh√≠vtuk
                        a makeFilterAndDimensions met√≥dust is, amelyet az nbviz_core.js √°llom√°nyban defini√°ltunk. A
                        makeFilterAndDimensions felhaszn√°lja a bet√∂lt√∂tt Nobel-d√≠jas adatsorunkat, hogy l√©trehozzon egy
                        Crossfilter sz≈±r√∂t, √©s n√©h√°ny dimenzi√≥t (pl. d√≠jkateg√≥ria) az adatra alapozva. El≈ësz√∂ris, l√©trehozzuk a
                        sz≈±r√∂nket felhaszn√°lva a Nobel-gy≈ëztesek adatsor√°t, amelyet a Python Eve RESTful API-nk t√©r√≠tett vissza.
                        Ahhoz, hogy l√©trehozzuk az eml√≠tett sz≈±r√∂t, leh√≠vjuk a <em>crossfilter</em> f√ºggv√©nyt a gy≈ëzteseket
                        tartalmaz√≥ objektumok t√∂mbj√©n:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">nbviz.filter = crossfilter(winnersData);
        // ...</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A Crossfilter √∫gy m≈±k√∂dik, hogy lehet≈ëv√© teszi sz√°munkra, hogy dimenzion√°lis
                        sz≈±r√∂ket hozzunk l√©tre az adatunkra alapozva. Ezt √∫gy tessz√ºk meg, hogy egy f√ºggv√©nyt haszn√°lunk az
                        objektumokon. A k√∂vetkez≈ë k√≥dr√©szlet l√©trehoz egy nem dimenzi√≥t, amelyet arra fogunk haszn√°lni, hogy a
                        Nobel-gy≈ëzteseket sz≈±rj√ºk nem szerint:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// ...

nbviz.genderDim = nbviz.filter.dimension(function(o) {
    return o.gender;
});

// ...</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A Crossfilter val√≥di ereje akkor mutatkozik meg, amikor t√∂bb dimenzion√°lis
                        sz≈±r√∂t √°ll√≠tunk be, amely lehet≈ëv√© teszi, hogy kedv√ºnk szerint alkossunk r√©szhalmazokat az adatsorunkb√≥l.
                        A nem szerinti dimenzi√≥ ut√°n l√©trehozunk egy √∫jabb kateg√≥ria dimenzi√≥t is:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">nbviz.categoryDim = nbviz.filter.dimension(function (o) {
    return o.category;
});</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Teh√°t, ez ut√°n m√°r k√©pesek lenn√©nk az adatunkat nem √©s kateg√≥ria szerint
                        darabolni. A mi Nobel-vizualiz√°ci√≥nkban ezek a sz≈±r√©sek felhaszn√°l√≥i interakci√≥ra lesznek eszk√∂z√∂lve a
                        men√ºbarb√≥l. A Crossfilter, amellett, hogy k√©pes sz≈±rt r√©szhalmazokat visszat√©r√≠teni, k√©pes csoportos√≠t√°si
                        m≈±veleteket is v√©grehajtani az adatunkon:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// l√©trehozza a lent l√°that√≥ csoportokat
let countryGroup = nbviz.countryDim.group();
countryGroup.all();
// visszat√©r√≠ti az √∂sszes csoportot, key-value szerint.

/* output:
[
    {key:"Argentina", value:5},
    {key:"Australia", value:9},
    ...
] */
// a fenti esetben a value a gy≈ëztesek √∂ssz-sz√°m√°t jel√∂li az adott orsz√°gb√≥l</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">√âs v√©g√ºl l√©trehozunk egy orsz√°g szerinti dimenzi√≥t is:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">nbviz.countryDim = nbviz.filter.dimension(function (o) {
    return o.country;
});</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Az el≈ëk√©sz√ºletek v√©ge fel√© haladva √©szrevettem azt, hogy val√≥j√°ban az√©rt nem
                        m≈±k√∂dnek a kor√°bban meg√≠rt k√≥dok az √©n rendszeremen, mert a v5-√∂s D3-ban nagy v√°ltoz√°sok jelentek meg,
                        amelyek nem teszik egym√°ssal kompatibiliss√° a kor√°bbi k√≥dot az √∫jjal. Ahhoz, hogy ezt a tov√°bbiakban
                        elker√ºljem √©s a k√∂nyv szerint tudjak haladni, egy r√©gebbi, v4-es, D3-at t√∂lt√∂ttem be, azzal m√°r ez a gond
                        nem jelenik meg. A gondok az async folyamatokkal jelentkeztek legf≈ëk√©ppen. Egyetlen v√°ltoz√°st kellett
                        eszk√∂z√∂ljek a jelenlegi k√≥dban ahhoz, hogy a r√©gebbi verzi√≥ra val√≥ visszat√©r√©s ut√°n minden eddig meg√≠rt
                        k√≥d m≈±k√∂dj√∂n:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">nbviz.getDataFromAPI = function (resource, callback) {
    d3.json($EVE_API + resource, function (error, data) {
        if (error) {
            return callback(error);
        }

        /* ha a v√°laszul kapott adatnak van 'items' mez≈ëje, akkor abban az esetben t√∂bb gy≈ëztessel van dolgunk */
        if ('_items' in data) {
            callback(null, data._items);
        } else {
            callback(null, data); /* ellenkez≈ë esetben csakis egyetlen gy≈ëztesr≈ël sz√≥l√≥ adatot k√©rt√ºnk le */
        }
        /* a callback f√ºggv√©ny bevesz egy error, √©s data argumentumot, ez√©rt sz√ºks√©ges a null */
    });
};</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                </section>

                <section id="6d3">
                    <h2 class="text-2xl pt-8 pb-4 font-semibold text-gray-800">Munka a D3-al √©s az oszlopdiagram</h2>
                    <p class="text-lg font-normal pb-3">A k√∂vetkez≈ëkben megismerked√ºnk a D3 k√∂nyvt√°rral az √°ltal, hogy meg√©p√≠ts√ºk
                        az els≈ë vizu√°lis elem√ºnket, az oszlopdiagramot. Ahhoz, hogy meg√©p√≠ts√ºnk egy ilyen √∂sszetev≈ët, el≈ësz√∂ris
                        v√©gigkell gondoljuk azt, hogy mib≈ël is √°ll egy oszlopdiagram. Egy oszlopdiagramnak h√°rom f≈ë komponense
                        van: tengelyek, jelmagyar√°zat √©s a c√≠mk√©k, v√©g√ºl term√©szetesen maguk az oszlopok. Mivel mi egy interakt√≠v
                        vizualiz√°ci√≥t hozunk l√©tre, ez√©rt a tengelyeket √©s az oszlopokat √∫gy kell l√©trehozzuk, hogy azok k√©s≈ëbb
                        k√©pesek legyen a felhaszn√°l√≥i interakci√≥ szerint √°talakulni. L√©p√©sr≈ël l√©p√©sre fogjuk a diagrammot
                        l√©trehozni, √©s csak a legv√©g√©n fogjuk az anim√°ci√≥t is be√©p√≠teni. Alapvet≈ëen, a k√∂vetkez≈ë l√©p√©seket fogjuk
                        megismerni mik√∂zben l√©trehozzuk az oszlopdiagrammot: kiv√°lasztunk DOM elemeket a weboldalr√≥l, lek√©rj√ºk √©s
                        ak√°r be is √°ll√≠tjuk azok tulajdons√°gait, attribut√∫mjait √©s st√≠lus√°t, v√©g√ºl √∫j DOM elemeket f≈±z√ºnk hozz√°,
                        vagy illeszt√ºnk be a f√°ba. Miut√°n ezeket az alapvet≈ë l√©p√©seket letudtuk, megismerkedhet√ºnk az √∫n. 'data
                        binding'-al, amely egyfajta adatszinkroniz√°ci√≥ az adatszolg√°ltat√≥ √©s fogyaszt√≥ k√∂z√∂tt, legink√°bb
                        √∂sszek√∂t√©snek lehetne ford√≠tani.</p>
                    <p class="text-lg font-normal pb-3">Els≈ëk√©nt, a kiv√°laszt√°sok. A kiv√°laszt√°sok tekinthet≈ëk a D3 gerinc√©nek.
                        jQuery-hez hasonl√≥ CSS selectorokon alapul√≥ kiv√°laszt√°st haszn√°l a D3, amely seg√≠ts√©g√©vel kiv√°laszthat √©s
                        megv√°ltoztathat egyenk√©nti vagy csoportos DOM elemeket. Minden l√°ncolt D3 m≈±veletsor egy DOM elem vagy egy
                        csoportnyi DOM elem kiv√°laszt√°s√°val kezd≈ëdik, haszn√°lva a <em>select</em> vagy <em>selectAll</em>
                        met√≥dusokat. Az el≈ëbbi az els≈ë, a selectornak megfelel≈ë elemet t√©r√≠ti vissza, m√≠g az ut√≥bbi az √∂sszeset,
                        amely a selectornak megfelel. A k√∂vetkez≈ë √°bra nagyszer≈±en szeml√©lteti a logik√°t:</p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig68.png"
                            alt="√Åbra 68">
                        <figcaption class="text-center pt-3 pb-4 text-md">68. √Åbra: A D3 kiv√°laszt√°si logik√°ja
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal pb-3">A fenti p√©lda azt szeml√©lteti mik√©nt tudja a kiv√°laszt√°s ut√°n l√°ncolva a
                        D3 megv√°ltoztatni a kiv√°lasztott DOM elem magass√°g√°t, amely annak attrib√∫tuma. Az attrib√∫tumok be√°ll√≠t√°sa
                        mellett a D3 k√©pes CSS st√≠lust √©s tulajdons√°gokat is be√°ll√≠tani (pl. egy adott checkbox bevan-e jel√∂lve
                        vagy sem), de ak√°r annak sz√∂veg√©t √©s HTML k√≥dj√°t is. A k√∂vetkez≈ë √°bra azokat a m√≥dokat mutatja be, ahogyan
                        a DOM elemeket k√©pes megv√°ltoztatni a D3:</p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig69.png"
                            alt="√Åbra 69">
                        <figcaption class="text-center pt-3 pb-4 text-md">69. √Åbra: DOM elem megv√°ltoztat√°sa a D3-al
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal pb-3">De ahogy k√©pes a D3 be√°ll√≠tani az eml√≠tett dolgokat, √∫gy k√©pes a megl√©v≈ë
                        be√°ll√≠t√°sokat lek√©rni is, amelyet legjobban a k√∂vetkez≈ë √°bra szeml√©ltet:</p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig70.png"
                            alt="√Åbra 70">
                        <figcaption class="text-center pt-3 pb-4 text-md">70. √Åbra: Egy 'rect bar' elem r√©szleteinek lek√©r√©se
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal pb-3">Az √°br√°n megjelen≈ë m√≥d szerint, ak√°r az elemek HTML k√≥dj√°t vagy azok
                        sz√∂veges tartalm√°t is k√©pesek vagyunk lek√©rni. Hogy a k√∂vetkez≈ë l√©p√©sre terj√ºnk elmondhat√≥ az, hogy eddig
                        csak √©s kiz√°r√≥lag m√°r megl√©v≈ë elemeket v√°ltoztattunk, ez term√©szetesen nagyon hasznos tud lenni, azonban
                        m√©gis nagyobb el≈ënyt jelent az, ha a programb√≥l vagyunk k√©pesek √∫j DOM elemeket l√©trehozni, felhaszn√°lva a
                        D3 <em>append</em> √©s <em>insert</em> met√≥dusait.</p>
                    <p class="text-lg font-normal">Ahhoz, hogy r√©szlet√©ben megismerj√ºk a technik√°t a k√∂vetkez≈ë HTML alappal
                        indulunk el, amely tartalmaz egy 'nobel-bar' placeholdert:</p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="html">&#60;!DOCTYPE html>
&#60;html>
    &#60;head>
        &#60;meta charset="UTF-8">
        &#60;link rel="stylesheet" href="style.css">
    &#60;/head>

    &#60;body>
        &#60;div id="nobel-bar">&#60;/div>

        &#60;script src="https://d3js.org/d3.v4.min.js">&#60;/script>
        &#60;script src="script.js">&#60;/script>
    &#60;/body>
&#60;/html></code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">√Åll√≠tsuk be els≈ë l√©p√©sben a 'nobel-bar' elem√ºnk m√©ret√©t CSS-el:</p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="css">#nobel-bar {
    width: 600px;
    height: 400px;
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">√Åltal√°ban az els≈ë l√©p√©s, amikor egy diagrammot hozunk l√©tre D3-ban, hogy
                        l√©trehozzuk azt az SVG keretet, amiben szerepelni fog. Ez azt jelenti, hogy hozz√°f≈±z√ºnk egy <em>svg</em>
                        canvas elemet a 'nobel-bar' div-hez, majd egy <em>g</em> csoportot fogunk hozz√°f≈±zni az svg canvas-hez,
                        amely tartalmazni fogja a meghat√°rozott diagramr√©szeket (a mi jelenlegi p√©ld√°k eset√©ben a diagram
                        oszlopait). Ennek a csoportnak szeg√©lyeket fogunk be√°ll√≠tani, hogy elf√©rjenek a k√ºl√∂nb√∂z≈ë diagramelemek,
                        p√©ldak√©ppen a tengelyek, a tengelyc√≠mk√©k √©s a c√≠m is. Konvencion√°lisan, a diagrammunk szeg√©lyeit egy
                        <em>margin</em> objektumban hat√°rozzuk meg, majd haszn√°ljuk a CSS specifikus magass√°g√°t √©s sz√©less√©g√©t a
                        diagrammunknak, amelyet a getBoundingClientRect vagy getBBox met√≥dusokkal √©r√ºnk el, √©s a kett≈ëb≈ël tudjuk
                        sz√°rmaztatni a csoportunk magass√°g√°t √©s sz√©less√©g√©t:</p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let chartHolder = d3.select('#nobel-bar');

let margin = {top: 20, right: 20, bottom: 30, left: 40};

let boundingRect = chartHolder.node().getBoundingClientRect();

let width = boundingRect.width - margin.left - margin.right;
let height = boundingRect.height - margin.top - margin.bottom;</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Miut√°n megkaptuk a fenti logika alapj√°n az oszlopcsoportunk sz√©less√©g√©t √©s
                        magass√°g√°t, haszn√°ljuk a D3-at, hogy l√©trehozzuk a diagram keret√©t, hozz√°f≈±zve a sz√ºks√©ges svg √©s g
                        tageket √©s meghat√°rozva az SVG canvas m√©reteit, valamint a csoport eltol√°s√°t is a translate haszn√°lat√°val:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">chartHolder.append('svg')
    .attr('width', width + margin.left + margin.right)
    .attr('height', height + margin.top + margin.bottom)
    .append('g').classed('chart', true)
    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Miut√°n a keret√ºnket a hely√©re illesztett√ºk, haszn√°lhatjuk megintcsak az
                        append-et, hogy oszlopokat is hozz√°adjunk. Ebben az esetben nem a val√≥s, hanem egy pr√≥ba adatsort fogunk
                        haszn√°lni, amely a k√∂vetkez≈ë:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">const nobelData = [{
        key: 'United States',
        value: 336
    },
    {
        key: 'United Kingdom',
        value: 98
    },
    {
        key: 'Germany',
        value: 79
    },
    {
        key: 'France',
        value: 60
    },
    {
        key: 'Sweden',
        value: 29
    },
    {
        key: 'Switzerland',
        value: 23
    },
    {
        key: 'Japan',
        value: 21
    },
    {
        key: 'Russia',
        value: 19
    },
    {
        key: 'Netherlands',
        value: 17
    },
    {
        key: 'Austria',
        value: 14
    }
];</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Egy durva megold√°s az oszlopok beilleszt√©s√©re az, ha v√©gigiter√°lunk a
                        <em>nobelData</em> t√∂mb√ºnk√∂n, √©s hozz√°f≈±z√ºnk egy oszlopot a 'chart' csoporthoz, ahogy haladunk. Az
                        iter√°l√°s sor√°n, haszn√°ljuk a t√∂mbben megtal√°lhat√≥ objektumok egyik mez≈ëj√©t, a 'value'-t, ahhoz, hogy
                        be√°ll√≠tsuk az oszlop magass√°g√°t √©s y-poz√≠ci√≥j√°t. Fontos megjegyezni azt, hogy az SVG lefel√© halad√≥
                        y-tengelyt haszn√°l, ez l√©nyeg√©ben azt eredm√©nyezi, hogy ahhoz, hogy a megfelel≈ë helyre helyezz√ºk az
                        oszlopot, kikell vonnunk annak a magass√°g√°t a chart magass√°g√°b√≥l:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let buildCrudeBarChart = function() {
    let chartHolder = d3.select('#nobel-bar');

    let margin = {
        top: 20,
        right: 20,
        bottom: 30,
        left: 40
    };

    let boundingRect = chartHolder.node().getBoundingClientRect();

    let width = boundingRect.width - margin.left - margin.right;
    let height = boundingRect.height - margin.top - margin.bottom;

    let barWidth = width / nobelData.length;

    let svg = chartHolder.append('svg')
        .attr('width', width + margin.left + margin.right)
        .attr('height', height + margin.top + margin.bottom)
        .append('g').classed('chart', true)
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

    nobelData.forEach(function(d, i) {
        svg.append('rect').classed('bar', true)
            .attr('height', d.value)
            .attr('width', barWidth)
            .attr('y', height - d.value)
            .attr('x', i*(barWidth));
    });
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">Egy m√°sik met√≥dus arra, hogy D3 elemeket adjon hozz√° a DOM f√°hoz az az
                        insert.
                        Az insert pontosan √∫gy m≈±k√∂dik, mint az append, azonban annak deklar√°ci√≥ja bevesz egy m√°sodik, selector
                        argumentumot, amellyel meghat√°rozhatjuk azt, hogy melyik l√©tez≈ë poz√≠ci√≥ el√© szeretn√©k beilleszteni az
                        elem√ºnket, ahelyett, hogy azt valaminek a v√©g√©hez hozz√°f≈±zn√©nk:
                    </p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig71.png"
                            alt="√Åbra 71">
                        <figcaption class="text-center pt-3 pb-4 text-md">71. √Åbra: Egy 'rect bar' elem r√©szleteinek lek√©r√©se
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal pb-3">A kor√°bbi p√©ld√°ban l√©trehoztunk egy nagyon kezdetleges oszlopdiagrammot
                        D3-al, azonban ennek a diagramnak sz√°mos probl√©m√°ja van. El≈ësz√∂ris, maga a loop, ennek az oszlopdiagramnak
                        alapfelt√©tele az, hogy v√©gig l√©peget√ºnk a t√∂mb elemein, ami a mi, b√°rmif√©le sz≈±r≈ë n√©lk√ºl, 927 elemet
                        tartalmaz√≥ t√∂mb√ºnk√∂n neh√©zkes lenne. Valamilyen m√≥don megkell oldanunk azt a probl√©m√°t is, hogy sz√°munkra
                        sz√ºks√©ges az, hogy oszlopokat adjunk hozz√°, √©s ak√°r vegy√ºnk ki, felhaszn√°l√≥i interakci√≥ v√°lasz√°ul, azt√°n
                        az √∫j oszlopokat friss√≠ten√ºnk kell az √∫j adatokkal, majd v√©g√ºl a teljes diagrammot √∫jra kell √≠gy rajzolni.
                        Ugyanakkor, a diagrammunk oszlopait √°lland√≥an sk√°l√°znunk is kell, hogy l√°that√≥v√° v√°ljon az oszlopok elt√©r≈ë
                        sz√°m a v√°lt√°sra, valamint a k√ºl√∂nb√∂z≈ë max √©rt√©k. Valamint, jelenesetben az is probl√©ma, hogy hol t√°roljuk
                        az adatsort. Jelenleg, minden adatvez√©relte v√°lt√°s a diagrammunkban csak √∫gy val√≥sulhat meg, hogy √°tadjuk
                        az adatsort, majd l√©trehozunk egy loop-ot, amivel v√©gigmegy√ºnk rajta, l√©trehozva az oszlopokat. Ez √°ltal
                        √∫gy √©rz≈ëdik, mintha az adat a D3 l√°ncolaton k√≠v√ºl l√©tezne, holott logikusan annak r√©szek√©nt kellene.
                    </p>
                    <p class="text-lg font-normal pb-3">A megold√°s a fent felvetett valamennyi probl√©m√°ra a D3 'data binding'-ja.
                        Tov√°bb√°, a sk√°l√°z√°si gondokat a D3 kieg√©sz√≠t≈ë k√∂nyvt√°rja, a <em>scale</em> fogja megoldani.
                    </p>
                    <p class="text-lg font-normal">El≈ësz√∂r megismerked√ºnk a D3 scale-j√©vel. A scale alapvet≈ë √∂tlete az, hogy
                        egy √©rt√©ket feleltet√ºnk meg az input tartom√°nyb√≥l az output sk√°l√°ra. A D3 sz√°mos sk√°l√°t rendelkez√©s√ºnkre
                        bocs√°jt, amelyet h√°rom f≈ë kateg√≥ri√°ba oszthatunk: kvantitat√≠v, ordin√°lis √©s id≈ësk√°l√°k. A gyakorlatban a D3
                        sk√°l√°k enyh√©n fur√°n jelennek meg, mivel egyr√©szt objektumok, m√°sr√©szt f√ºggv√©nyek. Ez l√©nyeg√©ben azt
                        jelenti, hogy miut√°n l√©trehoztad a sk√°l√°dat, k√©pes vagy k√ºl√∂nb√∂z≈ë met√≥dusokat leh√≠vni r√°, amellyel
                        be√°ll√≠thatod a tulajdons√°gait (pl. leh√≠vod a <em>domain</em> f√ºggv√©nyt, hogy be√°ll√≠tsd a sk√°la input
                        tartom√°ny√°t), de azonban k√©pes vagy, mint f√ºggv√©ny is leh√≠vni azt, egy tartom√°ny argumentummal, √©s ekkor
                        visszat√©r√≠t egy sk√°la √©rt√©ket:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// l√©trehozzuk a line√°ris sk√°l√°nkat
let scale = d3.scaleLinear();
// be√°ll√≠tjuk annak tartom√°ny√°t √©s sk√°l√°j√°t
// ez azt jelenti, hogy inputk√©nt 0 √©s 1 k√∂z√∂tti √©rt√©ket vesz be a sk√°la, √©s ennek egy 0 √©s 100 k√∂z√∂tti √©rt√©ket feltet meg
scale.domain([0, 1]).range([0, 100]);
// f√ºggv√©nyk√©nt leh√≠vva, megkaphatjuk azt, hogy a jelenlegi be√°ll√≠t√°sok alapj√°n 0.5-nek 50-et feleltet meg a sk√°l√°nk
scale(0.5);</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A k√∂vetkez≈ëkben vizsg√°ljuk meg a k√©t legfontosabb D3 sk√°l√°t, a kvantitat√≠v
                        √©s
                        ordin√°lis sk√°l√°kat, √©s figyelj√ºk meg azt, hogy hogyan tudjuk ≈ëket hasznos√≠tani az oszlopaink
                        l√©trehoz√°s√°ban.
                    </p>
                    <p class="text-lg font-normal">A D3 kvantitat√≠v sk√°l√°it √°ltal√°ban akkor fogjuk felhaszn√°lni, amikor vonal,
                        oszlop vagy √©ppens√©ggel sz√≥rtdiagrammokat hozunk l√©tre. A line√°ris sk√°l√°hoz hasonl√≥an egy folytonos
                        tartom√°nyon folytonos √©rt√©keket feleltet meg. P√©ldak√©ppen, azt szeretn√©nk, hogy az oszlopaink magass√°ga a
                        nobelData 'value' mez≈ëk line√°ris f√ºggv√©nye legyen. Ilyen logika ment√©n, elkezd√ºnk gondolkozni azon, hogy
                        milyen tartom√°ny felel meg ezeknek az √©rt√©keknek. Mivel a 'value' mez≈ëk az adott orsz√°g Nobel-nyerteseinek
                        a sz√°ma, a logikailag elk√©pzelhet≈ë min √©rt√©ke a 0, √©s a max √©rt√©k pedig a legt√∂bb nyertessel rendelkez≈ë
                        orsz√°g √©rt√©ke, jelen esetben az AE√Å 336 gy≈ëztessel, teh√°t a tartom√°nyunk [0, 336] k√∂z√∂tt van. K√∂vetkez≈ë
                        l√©p√©sben azt pr√≥b√°ljuk meg kital√°lni, hogy milyen √©rt√©keket kellene ennek a tartom√°nynak megfeleltetni. A
                        sk√°la jelen esetben az oszlopok min √©s max magass√°g k√∂z√∂tt lesz, teh√°t 0px-t≈ël 400px-ig:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// megkeress√ºk a t√∂mb legnagyobb √©rt√©k√©t
let maxWinners = d3.max(nobelData, function(d) {
    return +d.value;
});

// l√©trehozzuk a sk√°l√°nkat, a megfelel≈ë tartom√°nnyal √©s sk√°l√°val,
// megfigyelhetj√ºk a ford√≠tott sorrendet a sk√°l√°ban, hiszen l√©nyeg√©ben egy elt√≥l√°st jel√∂l lefel√©,
// a max √©rt√©ket nem kell elt√≥lni, hiszen 400px helyet fog elfoglalni,
// m√≠g a t√∂bbi enn√©l kevesebbet √©s azokat a marad√©k pixel nagys√°ggal lefel√© t√≥ljuk,
// ezt az elt√≥l√°st hat√°rozza meg a sk√°la nek√ºnk
let yScale = d3.scaleLinear().domain([0, maxWinners]).range([height, 0]);</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A p√©ld√°nkban a line√°ris sk√°la legegyszer≈±bb form√°j√°t haszn√°ljuk, hogy
                        l√©trehozzuk az oszlopdiagrammunk y tengely√©t, √©rt√©keket feleltetve meg egy folytonos tartom√°nyb√≥l, a
                        m√°sikba, de a line√°ris sk√°l√°k enn√©l t√∂bbre is k√©pesek. Az egyik leg√©rdekesebb tr√ºkkje az
                        <em>interpolate</em> met√≥dus, amely bevesz k√©t √©rt√©ket √©s visszat√©r√≠t egy interpol√°tort a kett≈ë k√∂z√∂tt,
                        legink√°bb k√∂zbesz√∫r√°snak lehet √©rteni. A mi eset√ºnkben, ez √∫gy n√©zne ki, hogy az interpolate met√≥dus,
                        visszat√©r√≠t egy 400 √©s 0 k√∂z√∂tti numerikus interpol√°tort, az interpol√°toroknak alap√©rtelmezettk√©nt a
                        tartom√°nyuk [0, 1]:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let numInt = d3.interpolate(400, 0);

numInt(1); // 0
numInt(0.5); // 200
numInt(0); // 400</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Az interpolate met√≥dus nem csak sz√°mokkal k√©pes dolgozni: ak√°r stringekkel,
                        sz√≠nk√≥dokkal, de ak√°r objektumokkal is. Valamint, a tartom√°nyokban nem csak k√©t elemet hat√°rozhatunk meg,
                        hanem ak√°r t√∂bbet is, ekkor √ºgyeln√ºnk kell arra, hogy a sk√°la ennek a hossznak megfelel≈ë legyen. K√©pesek
                        vagyunk ezt a kett≈ët √∂tv√∂zni √©s l√©trehozni egy hasznos kis colormapet:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let color = d3.scaleLinear().domain([-1, 0, 1]).range(['red', 'green', 'blue']);

color(-0.5); // z√∂ld √©s piros k√∂z√∂tti sz√≠n
color(0); // teljesen z√∂ld
color(0.5); // z√∂ld √©s k√©k k√∂z√∂tti sz√≠n</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A kvantitat√≠v sk√°l√°k sor√°ba nem csak a line√°ris sk√°la tartozik, hanem sok
                        m√°s
                        is, amelyekr≈ël r√©szletesen a D3 dokument√°ci√≥j√°ban lehet olvasni: logaritmikus, exponenci√°lis, kvant√°lis
                        (olyan sk√°l√°k, amelyeknek folytonos tartom√°nya van, de diszkr√©t sk√°l√°ja), kvantilis (olyan sk√°l√°k,
                        amelynek a tartom√°nya is diszkr√©t) √©s v√©g√ºl identit√°s sk√°l√°k (olyan line√°ris sk√°l√°k, amelyek megegyez≈ë
                        tartom√°nnyal √©s sk√°l√°val rendelkeznek). A kvantititat√≠v sk√°l√°k nagyon hasznosak amikor folytonos
                        √©rt√©kekkel kell foglalkozni, de gyakran mi csak azt szeretn√©nk, hogy √©rt√©keket feleltess√ºnk meg diszkr√©t
                        tartom√°nyra, p√©ldak√©ppen √©rt√©keket kapjunk kateg√≥ri√°kra n√©zve. A D3 rendelkezik egy erre szakosodott sk√°la
                        kateg√≥ri√°val, az ordin√°lis sk√°l√°kkal.
                    </p>
                    <p class="text-lg font-normal">Az ordin√°lis sk√°l√°k bevesznek egy t√∂mbnyi √©rt√©ket tartom√°nyukk√©nt, √©s ezeknek
                        az √©rt√©keknek feleltetnek meg egy m√°sik √©rt√©ket egy diszkr√©t vagy folytonos sk√°l√°n, fontos azt
                        megjegyezni, hogy minden √©rt√©knek pontosan egyetlen √©rt√©ket feleltet meg:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let oScale = d3.scaleOrdinal().domain(['a', 'b', 'c', 'd', 'e']).range([1, 2, 3, 4, 5]);

oScale('a'); // 1</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Az oszlopdiagrammunk eset√©ben ez √∫gy n√©zne ki, hogy egy t√∂mbnyi indexnek
                        szeretn√©nk √©rt√©keket megfeleltetni egy folytonos sk√°l√°n, hogy meghat√°rozzuk az oszlopaink x koordin√°t√°it.
                        Ahhoz, hogy ezt el√©rj√ºk megint elkell t√©rn√ºnk a k√∂nyvt≈ël, hiszen ezek a met√≥dusok m√°r nem l√©teznek a D3
                        k√∂nyvt√°r negyedik verzi√≥j√°t√≥l felfel√©. Ahhoz, hogy diszkr√©t √©rt√©keknek folytonos sk√°l√°r√≥l feleltess√ºnk meg
                        √©rt√©keket haszn√°lhatjuk a scaleBand sk√°lat√≠pust, valamint annak rangeRound met√≥dus√°t:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let bScale = d3.scaleBand().domain([1, 2, 3, 4, 5]).rangeRound([0, 400]);

bScale(5); // 320</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A kezdetleges oszlopdiagrammunkban, haszn√°ltuk a barWidth v√°ltoz√≥t, hogy
                        m√©retezz√ºk az oszlopainkat, pontosabban be√°ll√≠tsuk √©rtelemszer≈±en azok sz√©less√©g√©t. De √©szrevehett√ºk azt,
                        hogy abban az esetben nem volt leveg≈ës r√©sz az oszlopok k√∂z√∂tt, √∂ssze voltak ragadva, √≠gy is
                        fogalmazhatn√°nk. Abban az esetben, ahhoz, hogy leveg≈ës r√©szt adjunk az oszlop k√∂z√©, sz√ºks√©ges lett volna
                        egy kieg√©sz√≠t≈ë v√°ltoz√≥ haszn√°lata, valamint n√©mi igaz√≠t√°s az oszlop sz√©less√©g√©t √©s poz√≠ci√≥j√°t tekintve. A
                        band t√≠pus√∫ sk√°la ezt a probl√©m√°nkat egy-kett≈ëre megoldja, hiszen rendelkezik egy <em>padding</em>
                        met√≥dussal, amellyel meghat√°rozhatunk padding-et az oszlopok k√∂z√©, a padding-et az oszlopm√©retek
                        t√∂rtr√©szek√©nt kell megadni:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let oScale = d3.scaleBand().domain([1, 2]);

oScale.rangeRound([0, 100]);
oScale(2); // a 2-esnek az 50-et felelteti meg
oScale.bandwidth(); // 50, visszaadja minden band sz√©less√©g√©t, padding-el egy√ºtt, jelen esetben az 0

// a paddinget t√∂rtr√©szk√©nt hator√°zzuk meg: 0.1 * 50 = 5
oScale.padding(0.1);
oScale(2); // 52
oScale.bandwidth(); // 42, teh√°t 5-5 a padding, √©s 42 a val√≥di sz√©less√©ge az oszlopnak</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">Miut√°n megismert√ºk a D3 √°ltal haszn√°lt sk√°l√°k egy nagyon kicsi r√©sz√©t,
                        foglalkozhatunk a D3 f≈ë koncepci√≥j√°val a 'data binding'-al. Ahhoz, hogy teljes m√©rt√©kben kihaszn√°ljuk a D3
                        adta lehet≈ës√©geket, musz√°j megismern√ºnk az eml√≠tett koncepci√≥t, amely seg√≠ts√©g√©vel adatokat k√∂thet√ºnk az
                        adatsorunkb√≥l az annak megfelel≈ë DOM elemhez, majd friss√≠thetj√ºk a weboldalunkat erre az egyes√≠t√©sre
                        alapozva. Az adat √∂sszek√∂t√©se a DOM-al lehet≈ëv√© tesz egy rak√°s extra funkcionalit√°st, amikor azt a k√©t
                        leghasznosabb D3 met√≥dussal kombin√°ljuk: az <em>enter</em> √©s <em>exit</em> met√≥dusokkal. Az enter-el
                        k√©pesek vagyunk visszakapni minden olyan adatot, amely nincs hozz√°k√∂tve egy DOM elemhez, √©s haszn√°lhatjuk
                        ezt, hogy l√©trehozzunk √∫jakat, amelyek hozz√° lesznek k√∂tve. Az exit-el, amely az enter ellent√©tje,
                        lehet≈ëv√© teszi, hogy megtal√°ljunk b√°rmely olyan DOM elemet, amely nincs hozz√°k√∂tve egy adathoz. Teh√°t, ha
                        ezt a kett≈ët kombin√°ljuk, az oszlopdiagrammunk v√°ltoztat√°sa nagyon egyszer≈±v√© v√°lik.
                    </p>
                    <p class="text-lg font-normal">Ahhoz, hogy demonstr√°ljuk a D3 'data binding' mechanizmus√°t, haszn√°ljuk a
                        kor√°bban l√©trehozott SVG canvas√ºnket, valamint a chart csoportunkat. Ahhoz, hogy √∂sszek√∂ss√ºk az adatot a
                        D3-al, az adatnak el≈ësz√∂ris a megfelel≈ë form√°tumban kell lennie, √°ltal√°noss√°gban besz√©lve az adat egy
                        t√∂mbnyi objektum lesz, ahogy az a nobelData eset√©n is van. Ha rendelkez√ºnk minden eml√≠tett elemmel, akkor
                        azut√°n az adat√∂sszek√∂t√©s a DOM-al m√°r egy egyszer≈± dolog:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let margin = {
    top: 20,
    right: 20,
    bottom: 30,
    left: 40
};

let chartHolder = d3.select('#nobel-bar');
let boundingRect = chartHolder.node().getBoundingClientRect();

let width = boundingRect.width - margin.left - margin.right;
let height = boundingRect.height - margin.top - margin.bottom;

chartHolder.append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);
let svg = d3.select('#nobel-bar svg')
            .append('g').classed('chart', true).attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

let chart = d3.select('#nobel-bar .chart');
let bars = chart.selectAll('.bar').data(nobelData);</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A fenti p√©ld√°ban az adat√∂sszek√∂t√©skor √©rdekes dolgot tett√ºnk.
                        Kiv√°lasztottuk
                        el≈ësz√∂ris, a diagrammunkat tart√≥ kont√©nert, amelyet egy chart v√°ltoz√≥ba t√°roltunk. Majd ebb≈ël a
                        kont√©nerb≈ël kiv√°lasztottuk az √∂sszes 'bar' class-ot tartalmaz√≥ DOM elemet, √©s itt v√°lt a rendszer kev√©sb√©
                        intuit√≠vv√°, hiszen nincsen egy elem sem a chart csoporton bel√ºl, majd ezeket a nem l√©tez≈ë oszlopokat
                        hozz√°k√∂t√∂tt√ºk a nobelData adatsorunkhoz. A magyar√°zat erre az, hogy a D3 a h√°tt√©rben nyomon k√∂veti azt,
                        hogy mely DOM elemekhez k√∂t√∂tt hozz√° adatot, a bars objektumban tudjuk ezt el√©rni, de m√©g legal√°bb ennyire
                        fontos az is, hogy √≠gy azt is megtudhatjuk, hogy mely DOM elemekhez nem k√∂t√∂tt hozz√°. A k√∂vetkez≈ëkben
                        megvizsg√°ljuk azt, hogy hogyan tudjuk ezt az eg√©szet felhaszn√°lni.
                    </p>
                    <p class="text-lg font-normal">A D3 k√©t nagyon fontos met√≥dus√°t, az enter-t √©s az exit-et nem k√∂nny≈±
                        meg√©rteni, de m√©gis megpr√≥b√°ljuk egy kanonikusan egyszer≈± demonstr√°ci√≥n kereszt√ºl, l√©trehozva egy oszlop
                        t√©glalapot a nobelData adatsorunk minden elem√©re. Teh√°t, jelenleg megvan az adatsorunk, valamint
                        kiv√°lasztottuk a diagrammot tart√≥ kontextust, a chart, v√©g√ºl pedig kiv√°lasztottuk √©s hozz√° is k√∂t√∂tt√ºk az
                        adatokat a m√©g neml√©tez≈ë oszlopainkhoz. Most, hab√°r a kiv√°laszt√°sunk √ºres, hiszen nem tal√°lhat√≥ bar
                        classal rendelkez≈ë DOM elem a csoporton bel√ºl, a h√°tt√©rben a D3 nyomon k√∂veti az adatot, amit hozz√°juk
                        rendelt√ºnk. Ezen a ponton, k√©pesek vagyunk √©lni ezzel az ismeret√ºnkkel, √©s felhaszn√°lni az enter met√≥dust,
                        hogy l√©trehozzunk n√©h√°ny oszlopot az adatunkkal. Ha leh√≠vjuk az enter met√≥dust, az visszat√©r√≠ti az √∂sszes
                        olyan adatot, amit nem k√∂t√∂tt√ºnk m√©g hozz√° egy oszlophoz. Mivel, nem voltak oszlopok az eredeti
                        kiv√°laszt√°sunkban, egy adat sincs valamihez hozz√°k√∂tve, teh√°t az enter visszat√©r√≠ti az √∂sszes adatot egy
                        t√∂mb form√°j√°ban, l√©nyeg√©ben 10 darab placeholder node-ot:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">bars.enter(); // Array(10)</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Majd k√©pesek vagyunk ezeket a placeholder node-okat felhaszn√°lni, hogy
                        l√©trehozzuk a DOM elemeket. Jelenleg nem fogunk azzal foglalkozni, hogy helyesen felfel√© √°llva helyezz√ºk
                        el ≈ëket, de felhaszn√°ljuk az adataink value mez≈ëit √©s azok index√©t is, hogy be√°ll√≠tsuk az oszlopok
                        sorrendi poz√≠ci√≥j√°t √©s magass√°g√°t:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">bars = bars.enter();

bars.append('rect').classed('bar', true)
    .attr('width', 10).attr('height', function(d) { return d.value; })
    .attr('x', function(d, i) { return i * 12; })
    /* .attr('y', function(d) { return height - d.value; }) */</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Mostm√°r tudjuk azt, hogy mi t√∂rt√©nik akkor, ha egy √ºres kiv√°laszt√°ssal van
                        dolgunk. N√©zz√ºk meg azt is mi t√∂rt√©nik akkor, ha m√°r vannak DOM elemeink a kiv√°laszt√°son bel√ºl, amely
                        akkor t√∂rt√©nne meg, ha az adatsorunk id≈ëk√∂zben megv√°ltozik. Felt√©telezz√ºk azt, hogy rendelkez√ºnk k√©t bar
                        class-al ell√°tott rect-el a csoportunkon bel√ºl. Ha ezut√°n v√©grehatjuk ugyanazt az adat√∂sszek√∂t√©si
                        folyamatot, mint az el≈ëbb a data met√≥dussal, akkor √©szrevehetj√ºk azt, hogy a k√©t placeholder rect-√ºnkh√∂z
                        ker√ºlt hozz√°k√∂t√©sre a nobelData t√∂mb√ºnk els≈ë k√©t tagja. Ez azt eredm√©nyezi, hogy az enter csak √©s
                        kiz√°r√≥lag a valamihez hozz√° nem k√∂t√∂tt adatokat t√©r√≠ti vissza, teh√°t a 10-b≈ël jelen esetben csak 8-at. Ha
                        ezut√°n az el≈ëbbihez hasonl√≥an leh√≠vn√°nk az append-et √©s hozz√°f≈±zn√©nk a DOM f√°hoz az oszlopokat, akkor
                        ugyanazt kapn√°nk, mint az el≈ëbb, annyi kiv√©tellel, hogy az els≈ë k√©t oszlop nem szerepelne rajta, de a
                        poz√≠ci√≥k rendben lenn√©nek, hiszen ahogy az a Chrome DevTools-ban is l√°that√≥, hogy az index√ºnk megmarad √©s
                        a kor√°bbival megegyezik:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">bars.append('rect').classed('bar', true)
    .attr('width', 10).attr('height', function (d) { return d.value; })
    .attr('x', function(d, i) { return i * 12; });</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Teh√°t, a nobelData t√∂mb√ºnk els≈ë k√©t tagja hozz√° lett k√∂tve a kezdeti √°llapotban
                        l√©tez≈ë rect-ekhez, csak m√©g nem haszn√°ltuk ezt fel, hogy be√°ll√≠tsuk azok attrib√∫tumjait. Ha megvizsg√°ljuk
                        az els≈ë oszlopot jelent≈ë rect DOM elemet, akkor √©szrevehetj√ºk azt, hogy val√≥ban az adat hozz√° lett k√∂tve,
                        hiszen rendelkezik egy <em>__data__</em> objektummal, amely tartalmazza az AE√Å mez≈ëit. A k√∂vetkez≈ë
                        p√©ld√°ban n√©zz√ºk meg azt, hogy hogyan tudjuk az elem __data__ objektum√°nak adat√°t felhaszn√°lni arra, hogy
                        egy DOM elem name attrib√∫tumj√°t be√°ll√≠tsuk. A name attrib√∫tum be√°ll√≠t√°sa az√©rt lehet hasznos, mert ez
                        √°ltal specifikus kiv√°laszt√°sokat tudunk megejteni, p√©ld√°ul ha a felhaszn√°l√≥ kiv√°laszt egy orsz√°got,
                        k√©pesek vagyunk az √∂sszes elnevezett elem√©t annak az orsz√°gnak kiv√°lasztani √©s √°t√°ll√≠tani annak st√≠lus√°t:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let bar = d3.select('#nobel-bar .bar');

bar.attr('name', function(d, i) {
    let sane_key = d.key.replace(/ /g, '_');
    
    console.log('__data__ is: ' + JSON.stringify(d) + ', index is ' + i);

    return 'bar__' + sane_key;
});</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">M√°r t√∂bbsz√∂r is l√°thattuk azt, hogy az √∂sszes 'setter' met√≥dusa a D3
                        m√°sodik
                        argumentumk√©nt bevehet egy f√ºggv√©nyt, amely argumentumk√©nt megkapja a __data__ objektumot, teh√°t az
                        elemhez hozz√°k√∂t√∂tt adatot, illet≈ëleg az elem t√∂mbindex√©t. Majd a k√∂vetkez≈ëkben megl√°ssuk azt is, hogy az
                        √∫j adathozz√°k√∂t√©s ut√°n, ezt a logik√°t fogjuk haszn√°lni az attrib√∫tumok be√°ll√≠t√°s√°hoz a friss√≠tett
                        adatokkal.
                    </p>
                    <p class="text-lg font-normal pb-3">Mostm√°r tudjuk azt, hogy hogyan lehet adatobjektumokat hozz√°k√∂tni DOM
                        elemekhez, √©s hogyan tudjuk a hozz√°k√∂t√∂tt adatokat haszn√°lni arra, hogy hozz√°adjunk √∫j elemeket vagy
                        m√≥dos√≠tsunk megl√©v≈ëket a DOM-on. A k√∂vetkez≈ëkben ismerj√ºk meg azt is, hogy hogyan tudjuk a
                        vizualiz√°ci√≥nkat friss√≠teni ahogy az adat v√°ltozik. Ehhez, l√©nyeg√©ben felfogunk haszn√°lni egy friss√≠t√©si
                        folyamatmint√°t, a D3 egyik alapkoncepci√≥j√°t <em>'data-join'</em>-t. Az enter met√≥dussal m√°r l√°thattuk
                        ennek a data-join-nak az egyik fel√©t, most megn√©zz√ºk azt, hogy hogyan lehet egy√ºtt haszn√°lni az exit
                        met√≥dussal, hogy l√©trehozzuk az eml√≠tett mint√°t. A k√∂vetkez≈ë √°bra bemutatja azt, hogy hogyan n√©z ki a D3
                        friss√≠t√©si mint√°ja:
                    </p>
                    <figure>
                        <img class="mx-auto"
                            src="../img/fig72.png"
                            alt="√Åbra 72">
                        <figcaption class="text-center pt-3 pb-4 text-md">72. √Åbra: Egy 'rect bar' elem r√©szleteinek lek√©r√©se
                        </figcaption>
                    </figure>
                    <p class="text-lg font-normal pb-3">Teh√°t, a mi p√©ld√°nk eset√©ben el≈ësz√∂r hozz√°k√∂tj√ºk a nobelData adatunkat az
                        oszlopok kiv√°laszt√°s√°hoz, a kiv√°laszt√°s tartalmaz 2 oszlopot kezdeti √°llapot√°ban. Az els≈ë k√©t adatobjektum
                        hozz√°k√∂t≈ëdik a k√©t els≈ë oszlophoz, amelyek m√°r l√©teztek, a t√∂bbi adat pedig ekkor m√©g nincs semmihez sem
                        hozz√°k√∂tve. Haszn√°ljuk ezut√°n az enter met√≥dust az oszlopokon, hogy megkapjuk azokat az adatobjektumokat,
                        amelyek nincsenek megk√∂tve, majd felhaszn√°ljuk ezeket, hogy hozz√°f≈±zz√ºk a DOM-hoz, azon bel√ºl a chart
                        csoporthoz, ezek oszlopait. Majd be√°ll√≠tjuk az √∂sszes oszlop attrib√∫tumjait. V√©g√ºl, pedig haszn√°ljuk az
                        enter ellenkez≈ëj√©t, az exit-et, hogy megkapjunk minden olyan oszlopot, amelyhez nem ker√ºlt adat
                        hozz√°k√∂t√©sre, majd a remove met√≥dussal t√∂r√∂lj√ºk ezeket, hiszen nincs r√°juk sz√ºks√©g.
                    </p>
                    <p class="text-lg font-normal">A k√∂vetkez≈ëkben nincs m√°r m√°s dolgunk, minthogy √∂ssze√°ll√≠tsuk az eddig
                        tanult l√©p√©seket √©s l√©trehozzuk a friss√≠t√©si mint√°val ell√°tott oszlopdiagram k√≥dunkat. Fontos √©szrevenni,
                        hogy minden olyan l√©p√©st, amely f√ºggetlen az adat v√°ltoz√°s√°t√≥l, p√©ldak√©ppen a canvas m√©retei, az
                        <em>update</em> met√≥duson k√≠v√ºl helyezt√ºnk el, √©s minden olyan utas√≠t√°st, amely az adatt√≥l f√ºgg, az update
                        met√≥duson bel√ºl:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// megszerezz√ºk a chart m√©reteit
let chartHolder = d3.select('#nobel-bar');
const margin = {
    top: 20,
    right: 20,
    bottom: 30,
    left: 40
};
const boundingRect = chartHolder.node().getBoundingClientRect();
const width = boundingRect.width - margin.left - margin.right;
const height = boundingRect.height - margin.top - margin.bottom;

// l√©trehozzuk a sk√°l√°inkat
const xScale = d3.scaleBand().rangeRound([0, width]).padding(0.1);
const yScale = d3.scaleLinear().rangeRound([height, 0]);

// l√©trehozzuk a diagramtart√≥ csoportot
let svg = chartHolder.append('svg')
    .attr('width', width + margin.left + margin.right)
    .attr('height', height + margin.top + margin.bottom)
    .append('g').classed('chart', true)
    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

// az update met√≥dusunk, amely az adatokkal val√≥ friss√≠t√©st v√©gzi el a mint√°nak megfelel≈ëen
var update = function(data) {
    // friss√≠tj√ºk a sk√°l√°ink tartom√°ny√°t az adatnak megfelel≈ëen
    xScale.domain(d3.range(data.length));
    yScale.domain([0, d3.max(data.map(function (d) {
        return d.value;
    }))]);

    // hozz√°k√∂tj√ºk az adatot az oszlopcsoporthoz
    let bars = svg.selectAll('.bar').data(data);

    // l√©trehozzuk az √∫j oszlopokat √©s friss√≠tj√ºk az √∂sszes attrib√∫tumj√°t
    bars.enter().append('rect').classed('bar', true).attr('height', function (d, i) {
            return height - yScale(d.value);
        }).attr('width', xScale.bandwidth())
        .attr('y', function (d) {
            return yScale(d.value);
        }).attr('x', function (d, i) {
            return xScale(i);
        });;

    // kit√∂r√∂lj√ºk a felesleges oszlopokat
    bars.exit().remove();
};</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">A tov√°bbiakban megn√©zz√ºk azt, hogy hogyan tudjuk hozz√°adni a tengelyeket
                        √©s a
                        tengely c√≠mk√©ket az oszlopdiagrammunkhoz. A D3 alap√©rtelmezetten nem ny√∫jt sz√°munkra t√∫l sok magasszint≈±
                        diagramelemet, √≠gy a legt√∂bbet magunknak kell el≈ë√°ll√≠tanunk, azonban m√©gis biztos√≠t egy k√©nyelmes
                        <em>axis</em> objektumot. Az axis objektumot viszonylag k√∂nny≈± haszn√°lni, nagyon j√≥l m≈±k√∂dik egy√ºtt az
                        el≈ëbb l√©trehozott friss√≠t√©si mint√°nkkal, valamit ehhez lehet≈ëv√© teszi, hogy a tengely bejegyz√©sek √©s
                        c√≠mk√©k dinamikusan v√°ltozzanak a bemutatott adat v√°ltoz√°s√°ra.
                    </p>
                    <p class="text-lg font-normal">Ahhoz, hogy defini√°ljuk az x √©s y tengelyeinket, el≈ësz√∂ris tudunk kell, hogy
                        milyen tartom√°nyt √©s sk√°l√°t kell a tengelyeinknek reprezent√°lniuk. A mi eset√ºnkben ez megegyezzik az x √©s
                        y sk√°l√°ink sk√°l√°ival √©s tartom√°nyaival, teh√°t ezeket fogjuk szolg√°ltatni a tengelyeink scale met√≥dus√°nak.
                        A D3 axes azt is megengedi, hogy meghat√°rozzuk az orient√°ci√≥t, amely ler√∂gz√≠ti a tengelybejegyz√©sek √©s
                        c√≠mk√©k relat√≠v hely√©t. A mi oszlopdiagrammunk eset√©n term√©szetesen azt akarjuk, hogy az x tengely az alj√°n
                        √©s az y tengely az √°bra bal oldal√°n helyezkedjen el. Az ordin√°lis x tengely√ºnk c√≠mk√©ket fog tartalmazni
                        bejegyz√©sk√©nt minden oszlopra, de az y tengely eset√©n a bejegyz√©sek mondhatni tetsz≈ëlegesek, jelen esetben
                        10-es√©vel lesznek:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// l√©trehozzuk az x tengelyt, az x sk√°l√°t reprezent√°lva vele, az orient√°ci√≥t m√°r a leh√≠v√°sban megkell hat√°rozni
let xAxis = d3.axisBottom().scale(xScale);
// be√°llitjuk az y tengely tickjeit 10-es√©vel, √©s a tickFormat-ra az√©rt van sz√ºks√©g, mert az egy f≈ëre jut√≥
// mutat√≥t exponenci√°lis alakra akarjuk hozni, hiszen azok viszonylag kicsi sz√°mok
let yAxis = d3.axisLeft().scale(yScale).ticks(10).tickFormat(function (d) {
    if (nbviz.valuePerCapita) {
        return d.toExponential();
    }

    return d;
});</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Egy kev√©s CSS-re is sz√ºks√©g√ºnk lesz, ahhoz, hogy megfelel≈ëen jelenjenek meg a
                        tengelyeink:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="css">.axis {
    font-size: 10px;
    font-family: sans-serif;
}

.axis path, .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Mindeddig numerikus tartom√°nyt haszn√°ltunk egyfajta helyettes√≠t≈ëk√©nt az
                        ordin√°lis x-tengely√ºnkhz. Most sz√ºks√©g√ºnk lenne arra, hogy az x-tengely tartalmazza az oszlopc√≠mk√©inket,
                        amelyek az x-tengely bejegyz√©seit fogj√°k k√©pezni. Teh√°t, ebben az esetben az adatunk a k√∂vetkez≈ëk√©ppen fog
                        kin√©zni:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">{key: "Argentina", value: 4, code: "ARG", population: 42669500}</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">A fent megjelen≈ë h√°rom bet≈±s azon√≥s√≠t√≥ k√≥dokat szeretn√©nk haszn√°lni, mint az
                        x-tengely c√≠mk√©k, ami azt jelenti, hogy friss√≠ten√ºnk kell az ordin√°lis x-tengely√ºnk tartom√°ny√°t:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">xScale.domain(data.map(function (d) {
    return d.code;
}));</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Miut√°n be√°ll√≠tottuk a megfelel≈ë tartom√°nyt, valamint megvannak a tengely
                        gener√°toraink is, sz√ºks√©g√ºnk van n√©h√°ny SVG csoportra, amelyek a tengely tart√≥i lesznek, amelyeket
                        l√©trehozunk. Adjuk hozz√° ezeket a csoportokat a f≈ë svg selector-unkhoz, mint group-ok, megfelel≈ë class
                        nevekkel:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// az elmozd√≠t√°sra az√©rt van sz√ºks√©g, mert m√°sk√©pp az svg canvas tetej√©n helyezkedne el
    svg.append('g').attr('class', 'xaxis').attr('transform', 'translate(0,' + height + ')');
    svg.append('g').attr('class', 'yaxis');</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Az oszlopdiagrammunk tengelyeinek fix sk√°l√°ja lesz (az √°bra sz√©less√©ge √©s
                        magass√°ga), de azok tartom√°nyai att√≥l f√ºgg≈ëen fognak v√°ltozni, hogy a felhaszn√°l√≥ hogyan sz≈±ri az
                        adatokat. A k√∂vetkez≈ë p√©lda azt fogja bemutatni, hogy hogyan fognak a tengelyek friss√≠t≈ëdni az adatok
                        v√°ltoz√°s√°ra. Els≈ë l√©p√©sben mindig be√°ll√≠tjuk az √∫j tartom√°nyokat, majd ezek az √∫j sk√°latartom√°nyok fognak
                        t≈±kr√∂z≈ëdni, amikor a tengelygener√°torok leh√≠v√≥dnak a nekik megfelel≈ë csoportra:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">let updateAxis = function(data) {
    // els≈ëk√©nt friss√≠tj√ºk a sk√°latartom√°nyok az √∫j adatnak megfelel≈ëen
    xScale.domain(data.map(function(d) {
        return d.code;
    }));
    yScale.domain([0, d3.max(data, function(d) { return +d.value; })]);

    // m√°sodsorban pedig haszn√°ljuk a tengelygener√°torokat
    svg.select('.xaxis').call(xAxis)
        .selectAll('text').style('text-anchor', 'end').attr('dx', '-.8em')
        .attr('dy', '.15em').attr('transform', 'rotate(-65)');
    svg.select('.yaxis').call(yAxis);
};</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal">Miut√°n megvannak a m≈±k√∂d≈ë tengelyeink, adjunk hozz√° egy c√≠mk√©t az y-tengelyhez:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">// az√©rt van sz√ºks√©g erre, hogy elf√©rjen a c√≠mke
const X_PADDING_LEFT = 20;

// ...

const xScale = d3.scaleBand().rangeRound([X_PADDING_LEFT, width]).padding(0.1);

// ...

svg.append('g')
    .attr('class', 'yaxis')
    .append('text')
    .attr('id', 'y-axis-label')
    .attr('transform', 'rotate(-90)')
    .attr('y', 6)
    .attr('dy', '.71em')
    .style('text-anchor', 'end')
    .text('Number of Winners');

// elrejts√ºk az als√≥ tengelyvonalat, csak a bejegyz√©sek maradnak
svg.select('.domain').style('display', 'none');</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">V√©g√ºl, kor√°bban eml√≠tett√ºnk egy kieg√©sz√≠t≈ë l√©p√©st is az √°br√°nkhoz, az nem
                        m√°s,
                        mint az anim√°ci√≥. Az eddig l√©trehozott √°br√°nk teljesen funkcion√°lis, az adat v√°ltoz√°s√°ra megfelel≈ëk√©ppen
                        v√°laszol, azonban mondhatni a mozg√°sa darabos. A v√°lt√°sok hirtelen ugr√°sokban jelenik meg. Szerencs√©nkre,
                        a D3 rendelkezik √∫n. 'transition'-√∂kkel, amely lehet≈ës√©get ny√∫jt sz√°munkra arra, hogy az elemeink vizu√°lis
                        v√°ltoz√°sait mozg√°silag kisimitsuk, az √°ltal, hogy folyamatosan v√°ltoznak meg egy bizonyos id≈ëperi√≥dus
                        alatt.
                    </p>
                    <p class="text-lg font-normal pb-3">Ezt a folyamatos √°tv√°lt√°st viszonylag egyszer≈± el√©rni a D3 seg√≠ts√©g√©vel,
                        azonban mag√°ba foglalja azt is, hogy √©rts√ºk azt, hogy hogyan van az adat √∂sszek√∂tve a D3-ban.
                        Alap√©rtelmezetten, amikor √∫j adatot k√∂t√ºnk hozz√° megl√©v≈ë DOM elemekhez, ez a t√∂mb index felhaszn√°l√°s√°val
                        t√∂rt√©nik. Teh√°t, amennyiben a kor√°bban els≈ë helyen lev≈ë elem√ºnk, valamelyik m√°s poz√≠ci√≥ra ker√ºl, akkor az
                        els≈ë oszlop, m√°r nem az √∫j poz√≠ci√≥ra ker√ºlt elemhez van hozz√°k√∂tve, teh√°t a kor√°bbi els≈ë helyhez, hanem
                        ahhoz, amely az els≈ë helyre ker√ºlt. Ahhoz, hogy megkapjuk az eml√≠tett √°talakul√°si folytonoss√°got, ahhoz
                        nek√ºnk az adatot nem t√∂mb index, hanem egy egyedi azonos√≠t√≥ kulcs seg√≠ts√©g√©vel kell √∂sszek√∂tn√ºnk a DOM
                        elemmel. Seg√≠ts√©g√ºnkre, a D3 data met√≥dusa rendelkezik egy m√°sodik argumentummal is, ahol meghat√°rozhatunk
                        egy f√ºggv√©nyt, amely visszat√©r√≠t egy kulcsot az adatobjektumb√≥l, hogy arra haszn√°ljuk, hogy √∂sszek√∂ss√ºk
                        egy DOM elemmel. Teh√°t, ilyen √©rtelemben az els≈ë oszlop mindig ugyanarra az adatra mutat, amennyiben az
                        l√©tezik az √∫j adatsorban.
                    </p>
                    <p class="text-lg font-normal">Miut√°n az adatokat kulcs szerint k√∂t√∂tt√ºk oszlopokhoz, nincs m√°s dolgunk,
                        minthogy l√©trehozzuk az √°tmenetet. Ehhez haszn√°ljuk a D3 k√©t met√≥dus√°t a <em>transition</em>-t √©s a
                        <em>duration</em>-t:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">svg.selectAll('.bar').transition().duration(2000).attr('height', function (d, i) {
            return height - yScale(d.value);
        }).attr('width', xScale.bandwidth())
        .attr('y', function (d) {
            return yScale(d.value);
        }).attr('x', function (d, i) {
            /* return xScale(i); */
            return xScale(d.code);
        });
// ...
let bars = svg.selectAll('.bar').data(data, function (d) {
    return d.code;
});
// ...
svg.select('.xaxis').transition().duration(2000).call(xAxis)
    .selectAll('text').style('text-anchor', 'end').attr('dx', '-.8em')
    .attr('dy', '.15em').attr('transform', 'rotate(-65)');
svg.select('.yaxis').transition().duration(2000).call(yAxis);
// ...</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                    <p class="text-lg font-normal pb-3">Teh√°t, ha mindent helyesen csin√°ltunk akkor a v√°ltoz√°sok vizu√°lis
                        √°tmenetekben
                        kell megval√≥suljanak. A transition met√≥dus ebben az esetben csak egy egyszer≈± line√°ris √°tmenetet biztos√≠t,
                        azonban a D3 enn√©l t√∂bbre is k√©pes. P√©ldak√©ppen k√©pesek vagyunk a delay met√≥dust haszn√°lni, hogy
                        meghat√°rozzunk egy id≈ës√°vot, aminek letelte ut√°n fog elkezd≈ëdni az √°tmeneti anim√°ci√≥. Ez a k√©sleltet√©s,
                        ak√°r az adat f√ºggv√©ny√©ben is t√∂rt√©nhet. De, val√≥sz√≠n≈±leg a leghasznosabb √°tmeneti met√≥dus az
                        <em>ease</em>. A met√≥dus lehet≈ëv√© teszi azt, hogy meghat√°rozzuk milyen m√≥don akarjuk, hogy az elemek
                        attrib√∫tumjai megv√°ltozzanak az anim√°ci√≥s id≈ëtartam alatt. Az alap√©rtelmezett easing f√ºggv√©ny a
                        cubic-in-out, de k√©pesek vagyunk m√©g ak√°r quad-ot haszn√°lni, amely felgyorsul az anim√°ci√≥ alatt, vagy ak√°r
                        a bounce-ot √©s az elastic-ot is. M√©g van a sin is, amely az elej√©n felgyorsul, majd ahogy halad egyre
                        ink√°bb lelassul. De, ak√°r megt√∂rt√©nhet az is, hogy egyik easing f√ºggv√©ny sem kedv√ºnkre val√≥, de
                        szerencs√©nkre meghat√°rozhatunk saj√°tokat is, ezt a <em>tween</em> met√≥dus teszi lehet≈ëv√©.
                    </p>
                    <p class="text-lg font-normal">A v√©gs≈ë oszlopdiagram k√≥d, amely a projektbe ker√ºl a k√∂vetkez≈ëk√©ppen n√©z ki,
                        √∂sszes√≠tve az eddig tanultakat:
                    </p>
                    <pre class="my-4 text-sm md:text-md font-semibold rounded-md overflow-auto text-gray-200"><code class="javascript">(function (nbviz) {
    'use strict';

    const chartHolder = d3.select('#nobel-bar');
    const margin = {
        top: 20,
        right: 20,
        bottom: 35,
        left: 40
    };
    const boundingRect = chartHolder.node().getBoundingClientRect();

    const width = boundingRect.width - margin.left - margin.right;
    const height = boundingRect.height - margin.top - margin.bottom;

    const xPaddingLeft = 20;

    const xScale = d3.scaleBand().rangeRound([xPaddingLeft, width]).padding(0.1);
    const yScale = d3.scaleLinear().range([height, 0]);

    const xAxis = d3.axisBottom().scale(xScale);
    const yAxis = d3.axisLeft().scale(yScale).ticks(10).tickFormat(function (d) {
        if (nbviz.valuePerCapita) {
            return d.toExponential();
        } else {
            return d;
        }
    });

    const svg = chartHolder.append('svg').attr('width', width + margin.left + margin.right)
        .attr('height', height + margin.top + margin.bottom)
        .append('g')
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

    svg.append('g').attr('class', 'xaxis').attr('transform', 'translate(0,' + height + ')');
    svg.append('g').attr('class', 'yaxis').append('text').attr('id', 'y-axis-label').attr('transform', 'rotate(-90)')
        .attr('y', 6).attr('dy', '.71em').style('text-anchor', 'end');


    nbviz.updateBarChart = function (data) {
        xScale.domain(data.map(function (d) {
            return d.code;
        }));
        yScale.domain([0, d3.max(data, function (d) {
            return +d.value
        })]);

        svg.select('.xaxis').transition().duration(nbviz.TRANS_DURATION)
            .call(xAxis).call(function(g) {
                return g.select('.domain').remove();
            }).selectAll('text').style('text-anchor', 'end').attr('dx', '-.8em')
            .attr('dy', '.15em').attr('transform', 'rotate(-65)');
        svg.select('.yaxis').transition().duration(nbviz.TRANS_DURATION)
            .call(yAxis);

        const bars = svg.selectAll('.bar').data(data, function (d) {
            return d.code;
        });

        bars.enter().append('rect').classed('bar', true)
            .merge(bars).classed('active', function (d) {
                return d.key === nbviz.activeCountry;
            }).transition().duration(nbviz.TRANS_DURATION).attr('x', function (d) {
                return xScale(d.code);
            }).attr('y', function (d) {
                return yScale(d.value);
            }).attr('width', xScale.bandwidth())
            .attr('height', function (d) {
                return height - yScale(d.value);
            }).style('fill', '#0048ab');

        bars.exit().remove();

        setTimeout(function() {
            const yLabel = svg.select('#y-axis-label').text('Number of Winners').style('fill', '#000');
        }, 2000);
    };

}(window.nbviz = window.nbviz || {}));</code><button id="copy"
    class="text-sm md:text-md font-semibold">M√°sold</button></pre>
                </section>
            </section>

            <!-- √∂t√∂dik r√©sze v√©ge -->

            <div class="my-8 flex content-center">
                <button
                    class="flex-auto w-24 bg-gray-900 text-white group hover:bg-blue-800 transition duration-75 ease-in rounded-md"><a
                        class="block px-4 py-2"
                        href="5.html"><span class="inline-block font-normal transform group-hover:-translate-x-1 transition
                            duration-100 ease-in">&larr;</span>
                        El≈ëz≈ë</a></button>
                <!-- <button class="flex-auto w-24 ml-4 py-2 bg-gray-900 text-white group hover:bg-blue-800 transition duration-75
                    ease-in rounded-md"><a class="block px-4"
                        href="5.html">K√∂vetkez≈ë
                        <span
                            class="inline-block font-normal transform group-hover:translate-x-1 transition duration-100 ease-in">&rarr;</span></a></button> -->
            </div>
        </main>

        <div id="arr"
            class="fixed block transition duration-100 ease-in"><a class="inline-block text-3xl py-3 px-6 hover:text-blue-800 transition duration-100 ease-in transform hover:scale-125
                opacity-50 hover:opacity-100"
                href="#menu">&uarr;</a></div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.10.2/underscore-min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
        <script src="../tools/pushy-1.3.0/js/pushy.min.js"></script>
        <!-- cross-platform megold√°s a smooth-scroll-ra, jQuery haszn√°lat√°val -->
        <script src="../javascript/smooth.js"></script>
        <script src="../javascript/main.js"></script>
        <script src="../javascript/introd3.js"></script>
    </body>

</html>